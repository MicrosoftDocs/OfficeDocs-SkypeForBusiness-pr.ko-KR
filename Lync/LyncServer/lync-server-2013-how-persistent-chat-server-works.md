---
title: 'Lync Server 2013: 영구 채팅 서버 작동 방식'
description: 'Lync Server 2013: 영구 채팅 서버의 작동 방식'
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
f1.keywords:
- NOCSH
TOCTitle: How Persistent Chat Server works
ms:assetid: 3d04e9a1-3f0c-458e-bcbe-d27c8c464276
ms:mtpsurl: https://technet.microsoft.com/en-us/library/JJ683096(v=OCS.15)
ms:contentKeyID: 49684643
ms.date: 07/23/2014
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: c65df6a13305f75a8a25b85a39688fadf64e476c
ms.sourcegitcommit: d42a21b194f4a45e828188e04b25c1ce28a5d1ae
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/17/2020
ms.locfileid: "48562964"
---
# <a name="how-persistent-chat-server-works-in-lync-server-2013"></a>Lync Server 2013에서 영구 채팅 서버가 작동 하는 방식

<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="https://msdn.microsoft.com/">

<div data-asp="https://msdn2.microsoft.com/asp">



</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**마지막으로 수정 된 항목:** 2012-11-21_

Lync Server 2013, 영구 채팅 서버를 사용 하면 시간이 지남에 따라 지속 되는 단체 및 토픽 기반 대화에 참가할 수 있습니다. 영구 채팅 서버는 조직에서 다음을 수행 하는 데 도움이 될 수 있습니다.

  - 지리적으로 분산되고 업무가 연관된 팀 간의 통신을 향상시킵니다.

  - 보다 많은 구성원과 정보를 보다 많이 공유할 수 있습니다.

  - 조직 내외부에서 광범위하게 정보를 공유할 수 있습니다.

  - 효율적인 정보 공유로 정보 오버로드를 줄여 줍니다.

  - 정보 인식을 향상시킵니다.

  - 중요한 지식과 정보의 배포를 향상시킵니다.

선택적 역할로 Lync Server 2013를 사용 하 여 영구 채팅 서버를 배포할 수 있습니다. 영구 채팅 서비스는 전용 풀에서 실행 되며 영구 채팅 서버 풀은 Lync Server 풀에 의존 하 여 메시지를 라우팅합니다. 클라이언트는 XCCOS(eXtensible Chat Communication Over SIP)를 사용합니다. Lync Server 프런트 엔드 서버는 트래픽을 영구 채팅 서버 풀로 라우팅하도록 구성 됩니다.

<div>

## <a name="high-level-architecture"></a>고급 아키텍처

다음 다이어그램에서는 영구 채팅 서버 아키텍처 및 서비스에 대 한 높은 수준의 관점을 제공 합니다.

**영구 채팅 서버 고급 아키텍처**

![영구 채팅 서버 아키텍처](images/JJ683096.5db6f36f-4461-4d87-ba77-463b7ffe609b(OCS.15).jpg "영구 채팅 서버 아키텍처")

**영구 채팅 서버 고급 서비스**

![영구 채팅 서버 구성 요소](images/JJ683096.b6d743aa-3a86-4081-aaef-4fe3257db4e7(OCS.15).jpg "영구 채팅 서버 구성 요소")

영구 채팅 서버 프런트 엔드 서버에서 실행 되는 서비스는 두 가지가 있습니다.

  - 영구 채팅(채널)

  - 규정 준수

<div>

## <a name="persistent-chat-channel-service"></a>영구 채팅(채널) 서비스

영구 채팅 (채널) 서비스는 영구 채팅 서버를 담당 하는 핵심 서비스입니다. 이 서비스는 다음과 같은 기능을 제공합니다.

  - 수신 메시지를 허용합니다.

  - 영구 대화방 내에서 온라인 참가자 등록 및 목록 만들기

  - 다른 채널 구독자에게 메시지를 재전송합니다.

  - 채널 관리, 채팅방 초대, 검색 및 새 콘텐츠 알림을 위한 논리를 구현합니다.

영구 채팅 (채널) 서비스는 영구 채팅 저장소를 사용 하 여 대화방 콘텐츠 및 기타 시스템 메타 데이터 (권한 부여 규칙 등)를 저장 하 고 액세스 합니다. 이 서비스는 대화방에 업로드 되는 파일을 영구 채팅 파일 저장소에 저장 합니다.

</div>

<div>

## <a name="compliance-service"></a>준수 서비스

준수 서비스는 영구 채팅 서버의 선택적 구성 요소 이며 채팅 콘텐츠 및 이벤트를 영구 채팅 준수 저장소에 보관 하는 일을 담당 합니다. 조직에 영구 채팅 작업을 보관 해야 하는 규정이 있으면 선택적 영구 채팅 준수 서비스를 배포할 수 있습니다. 준수 서비스는 영구 채팅 풀의 각 영구 채팅 서버에 설치 됩니다. 영구 채팅 서버 규정은 구성 된 경우 대화방 참가/탈퇴, 메시지 게시 및 읽기와 같은 사용자 활동을 기록 합니다. 준수 서비스는 영구 채팅 준수 파일 저장소에 보관 해야 하는 파일을 저장 합니다.

</div>

<div>

## <a name="persistent-chat-web-services"></a>영구 채팅 웹 서비스

Lync Server 프런트 엔드 서버에서 IIS (인터넷 정보 서비스)에 의존 하는 두 서비스를 실행 하며 웹 구성 요소로 구현 됩니다.

  - **파일 업로드/다운로드를 위한 영구 채팅 웹 서비스** 채팅방에서 파일을 게시 하 고 검색 하는 일을 담당 합니다.

  - **채팅방 관리를 위한 영구 채팅 웹 서비스** 사용자에 게 대화방을 관리 하는 기능을 제공 하 고 새 채팅방을 만들 책임이 있습니다.

</div>

</div>

<div>

## <a name="how-do-i-start-using-persistent-chat-server"></a>영구 채팅 서버를 사용 하려면 어떻게 해야 하나요?

영구 채팅 서버는 Lync Server 2013 인프라 내의 선택적 서버 역할입니다. 영구 채팅 서버 역할을 설치 하는 경우 관리자가 정책을 통해 사용 하도록 설정한 모든 사용자가 Lync 2013 클라이언트와 영구 채팅을 사용할 수 있습니다.

영구 채팅 서버를 배포 하 고 사용자가 정책에 따라 기능을 활용할 수 있도록 하는 방법에 대 한 자세한 내용은 [Lync server 2013에서 영구 채팅 서버 배포](lync-server-2013-deploying-persistent-chat-server.md)를 참조 하십시오.

영구 채팅 서버 배포에 대 한 설정을 구성 하는 방법에 대 한 자세한 내용은 [Lync server 2013의 영구 채팅 서버 배포](lync-server-2013-deploying-persistent-chat-server.md) 및 [lync Server 2013, 영구 채팅 서버 관리](managing-lync-server-2013-persistent-chat-server.md)를 참조 하세요.

Lync 2013 클라이언트에서 영구 채팅 기능을 활용할 수 있도록 정책을 통해 사용자를 설정 하는 방법에 대 한 자세한 내용은 [Lync server 2013의 영구 채팅 서버 배포](lync-server-2013-deploying-persistent-chat-server.md) 및 [lync Server 2013, 영구 채팅 서버 관리](managing-lync-server-2013-persistent-chat-server.md)를 참조 하세요.

영구 채팅 준수를 배포한 경우 규정 준수 설정을 구성 하는 방법에 대 한 자세한 내용은 [Lync Server 2013, 영구 채팅 서버 관리](managing-lync-server-2013-persistent-chat-server.md) 를 참조 하세요.

</div>

<div>

## <a name="persistent-chat-call-flows"></a>영구 채팅 호출 흐름

영구 채팅 클라이언트는 XCCOS을 사용 하 여 영구 채팅 서비스와 통신 합니다. 다음 시퀀스에서는 로그인 프로세스와 일반적인 방 구독 및 메시지 게시 시나리오에 대해 설명합니다.

<div>

## <a name="sign-in"></a>로그인

다음 통화 흐름 다이어그램 및 단계에서는 로그인 프로세스에 대해 설명 합니다.

**영구 채팅 클라이언트 로그인 통화 흐름**

![영구 채팅 서버 통화 흐름 다이어그램](images/JJ683096.9b3b3c61-caca-42b6-853c-6a09e6ff5c44(OCS.15).jpg "영구 채팅 서버 통화 흐름 다이어그램")

1.  영구 채팅 클라이언트는 먼저 SIP 구독을 보내 대역내 프로 비전 문서를 서버에서 검색 합니다. 이 문서는 영구 채팅 서버 풀의 SIP Uri 목록 및 사용자에 대해 영구 채트를 사용 하거나 사용 하지 않도록 설정할지 여부를 나타냅니다.

2.  영구 채팅 클라이언트에서 이전 단계에서 얻은 영구 채팅 서버의 SIP URI로 SIP 초대 메시지를 보냅니다. 초대 시퀀스에는 200 OK와 ACK가 오고, 영구 채팅 클라이언트는 이제 영구 채팅 서버 끝점을 사용 하 여 SIP 세션을 열었습니다. 따라서 영구 채팅 클라이언트는 동작을 수행 하도록 서버를 요청 하는 채팅 메시지 또는 명령이 포함 된 SIP INFO 메시지를 보내 영구 채팅 서버와 통신 합니다. 이러한 모든 메시지는 200 OK 또는 503 Service Unavailable(즉, 서버 부하가 심한 경우) 메시지로 응답됩니다. 클라이언트에 503 응답이 수신되면 메시지를 재시도합니다. (이 예에는 503 응답은 포함 되지 않습니다.) 서버에서 메시지 또는 명령을 수락 하 고 200 OK를 보내면 별도의 SIP 정보 메시지 형식으로 클라이언트에 대 한 응답을 제공 합니다. 이 응답에는 원래 명령에 대한 참조가 포함됩니다.

3.  영구 채팅 클라이언트는 XCCOS **getserverinfo** 명령이 포함 된 SIP INFO 메시지를 보냅니다. 영구 채팅 서버는 영구 채팅 서비스 구성에 대 한 정보가 포함 된 새로운 SIP 정보 메시지를 사용 하 여 회신 합니다.

4.  영구 채팅 클라이언트는 XCCOS **getassociations** 명령을 포함 하는 SIP INFO 메시지를 보냅니다. 영구 채팅 서버가 사용자가 구성원 인 대화방 목록을 포함 하는 새 SIP 정보 메시지를 사용 하 여 회신 합니다. 영구 채팅 클라이언트에서 명령을 반복 하 여 사용자가 관리자 인 대화방 목록을 검색 합니다.

5.  영구 채팅 클라이언트는 "현재 상태" 문서에서 팔 로우 한 대화방 목록을 가져오고, 각 팔 로우 하는 대화방은 "roomSetting" 범주로 표시 됩니다. 모든 팔 로우 된 대화방은 대화방 Uri 목록을 포함 하는 XCCOS **bjoin** 명령을 포함 하는 단일 SIP 정보 메시지에 의해 조인 됩니다. 팔 로우 대화방 목록이 서버에 보관 되기 때문에 컴퓨터의 모든 클라이언트는 지정 된 사용자 URI에 대해 같은 팔 로우 대화방 목록을 갖습니다. 또한 영구 채팅 클라이언트는 로컬 컴퓨터 레지스트리의 열린 대화방 목록 (사용자가이 옵션을 사용 하도록 설정한 경우)을 유지 하 고 각 대화방에 대 한 XCCOS **join** 명령이 포함 된 SIP INFO 메시지를 전송 하 여 로그인 시 이러한 각 채팅방에 참가 합니다. 이 목록은 레지스트리에 보관 되므로 서로 다른 컴퓨터에서 실행 되는 두 개의 영구 채팅 클라이언트 마다 다를 수 있습니다.

6.  연결 된 각 대화방에 대해 영구 채팅 클라이언트는 XCCOS **bccontext** 명령이 포함 된 SIP INFO 메시지를 보냅니다. 영구 채팅 서버가 대화방에 최신 채팅 메시지를 포함 하는 새 SIP 정보 메시지를 사용 하 여 회신 합니다.

7.  영구 채팅 클라이언트는 XCCOS **getinv** (즉, 초대 받기) 명령을 포함 하는 SIP INFO 메시지를 보내 클라이언트가 아직 확인 되지 않은 새 대화방 초대를 요청 합니다. 별도의 SIP 정보 메시지에서 영구 채팅 서버는 이러한 대화방의 목록을 반환 합니다.

</div>

<div>

## <a name="subscribe-to-a-room-and-post-a-message"></a>방 구독 및 메시지 게시

다음 통화 흐름 다이어그램 및 단계에서는 일반적인 대화방 구독 및 메시지 게시 시나리오에 대해 설명 합니다.

**영구 채팅 클라이언트 대화방 구독 및 메시지 게시 호출 흐름**

![대화방 구독 및 메시지 게시 시나리오](images/JJ683096.2d3c417e-c91b-42bd-964e-285b72bb2e44(OCS.15).jpg "대화방 구독 및 메시지 게시 시나리오")

1.  영구 채팅 클라이언트에서 User1이 **대화방 가입**을 클릭 하 고 **검색**을 클릭 한 후에 검색 조건을 입력 합니다. 영구 채팅 클라이언트는 검색 조건과 함께 XCCOS **chansrch** (대화방 검색) 명령이 포함 된 SIP 정보 메시지를 보냅니다. 영구 채팅 서버 백 엔드 데이터베이스를 쿼리하고 검색 조건을 충족 하는 사용 가능한 대화방 목록이 포함 된 새 SIP 정보 메시지에 회신 합니다.

2.  User1이 참가하려는 채팅방을 선택한 후 **이 방 팔로우**를 클릭합니다. 영구 채팅 클라이언트가 영구 채팅 서버 전송 XCCOS **join** 명령 및 사용자가 선택한 대화방의 대화방 ID가 포함 된 SIP 정보 메시지입니다. 영구 채팅 서버는 프로 비전 데이터를 포함 하는 SIP INFO 메시지와 함께 회신 합니다.

3.  영구 채팅 클라이언트가 영구 채팅 서버 전송 XCCOS **bccontext** (backchat context) 명령이 포함 된 SIP 정보 메시지입니다. 영구 채팅 서버는 채팅 기록을 검색 하 고 별도의 SIP 정보 메시지로 영구 채팅 클라이언트에 게 반환 합니다. 이때 사용자가 방에 들어가고 참가할 준비가 됩니다.

4.  User1이 새 메시지를 입력한 후 **보내기**를 클릭합니다. 영구 채팅 클라이언트가 SIP 정보 XCCOS **grpchat** 명령의 대화방에 메시지를 게시 합니다. 영구 채팅 서버에이 새 메시지의 복사본이 영구 채팅 백 엔드 데이터베이스에 저장 됩니다.

5.  영구 채팅 서버는 이미 대화방에 들어간 SIP 정보 XCCOS **grpchat** 메시지의 별도 복사본을 사용자 2에 게 보냅니다.

</div>

</div>

<div>

## <a name="persistent-chat-compliance-call-flows"></a>영구 채팅 준수 호출 흐름

영구 채팅 서버는 메시지 큐 (MSMQ 라고도 함)와 준수 데이터를 처리 하기 위한 추가 준수 데이터베이스 (mgccomp)를 사용 합니다. 준수 이벤트를 처리하는 방법에 대한 예로 다음 이벤트 시퀀스에서는 메시지 게시 이벤트가 처리되는 방법에 대해 설명합니다.

1.  사용자가 메시지를 방에 게시합니다.

2.  영구 채팅 서버는 이벤트와 관련 된 정보를 개인 메시지 큐 큐에 저장 합니다.

3.  영구 채팅 준수 서버가 큐에서이 이벤트를 읽고 나중에 처리 하기 위해 mgccomp 데이터베이스에 배치 합니다.

4.  영구 채팅 준수 서버가 주기적으로 데이터베이스에서 이벤트 집합을 처리 하 고이를 영구 채팅 준수 어댑터로 보내 처리 합니다.

5.  어댑터가 데이터를 성공적으로 처리 하면 영구 채팅 준수 서버가 mgccomp 데이터베이스에서 이벤트를 삭제 합니다.

</div>

</div>

<span> </span>

</div>

</div>

</div>

