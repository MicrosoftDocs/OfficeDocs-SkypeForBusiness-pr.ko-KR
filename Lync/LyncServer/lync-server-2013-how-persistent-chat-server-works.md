---
title: 'Lync Server 2013: 영구 채팅 서버 작동 방식'
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
TOCTitle: How Persistent Chat Server works
ms:assetid: 3d04e9a1-3f0c-458e-bcbe-d27c8c464276
ms:mtpsurl: https://technet.microsoft.com/en-us/library/JJ683096(v=OCS.15)
ms:contentKeyID: 49684643
ms.date: 07/23/2014
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: 0bf6179e1ce24264c2079b3096fa9bb8c539ca1c
ms.sourcegitcommit: bb53f131fabb03a66f0d000f8ba668fbad190778
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 05/11/2019
ms.locfileid: "40983696"
---
<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="http://msdn.microsoft.com/en-us/">

<div data-asp="http://msdn2.microsoft.com/asp">

# <a name="how-persistent-chat-server-works-in-lync-server-2013"></a>Lync Server 2013에서 영구 채팅 서버가 작동 하는 방식

</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**마지막으로 수정한 주제:** 2012-11-21_

Lync Server 2013, 영구 채팅 서버를 사용 하면 시간에 따라 유지 되는 단체의 토픽 기반 대화에 참여할 수 있습니다. 영구 채팅 서버는 조직에서 다음을 수행할 수 있도록 지원 합니다.

  - 지리적으로 분산 된 팀과 부서간 업무 흐름도 간의 의사 소통 개선

  - 정보 인식 및 참가

  - 확장 된 조직과의 통신 개선

  - 정보 오버 로드 줄이기

  - 정보 인식 향상

  - 중요 한 지식 및 정보의 dispersion 증가

Lync Server 2013에서 영구 채팅 서버를 선택적 역할로 배포할 수 있습니다. 영구 채팅 서비스는 전용 풀에서 실행 되며 영구 채팅 서버 풀은 메시지를 라우팅하는 Lync Server 풀에 따라 달라 집니다. 클라이언트는 SIP (XCCOS)를 통해 확장 가능한 채팅 통신을 사용 합니다. Lync Server 프런트 엔드 서버는 트래픽을 영구 채팅 서버 풀로 라우팅하도록 구성 됩니다.

<div>

## <a name="high-level-architecture"></a>상위 수준 아키텍처

다음 다이어그램은 영구 채팅 서버 아키텍처 및 서비스의 상위 수준 큐브 뷰를 제공 합니다.

**영구 채팅 서버 상위 수준 아키텍처**

![영구 채팅 서버 아키텍처.] (images/JJ683096.5db6f36f-4461-4d87-ba77-463b7ffe609b(OCS.15).jpg "영구 채팅 서버 아키텍처.")

**영구 채팅 서버 상위 수준 서비스**

![영구 채팅 서버 구성 요소.] (images/JJ683096.b6d743aa-3a86-4081-aaef-4fe3257db4e7(OCS.15).jpg "영구 채팅 서버 구성 요소.")

영구 채팅 서버 프런트 엔드 서버에서 실행 되는 서비스에는 다음 두 가지가 있습니다.

  - 영구 채팅 (채널)

  - 충족

<div>

## <a name="persistent-chat-channel-service"></a>영구 채팅 (채널) 서비스

영구 채팅 (채널) 서비스는 영구 채팅 서버를 담당 하는 핵심 서비스입니다. 이 서비스는 다음 기능을 제공 합니다.

  - 받는 메시지 수락

  - 영구 채팅방 내에서 온라인 참가자를 등록 하 고 나열 합니다.

  - 다른 채널 등록자에 게 메시지 재전송

  - 채널 관리, 채팅방 초대, 검색, 새 콘텐츠 알림에 대 한 논리를 구현 합니다.

영구 채팅 (채널) 서비스는 영구 채팅 저장소를 사용 하 여 채팅방 콘텐츠 및 기타 시스템 메타 데이터 (권한 부여 규칙 등)를 저장 하 고 액세스 합니다. 이 서비스는 영구 채팅 파일 저장소의 채팅방에 업로드 된 파일을 저장 합니다.

</div>

<div>

## <a name="compliance-service"></a>준수 서비스

준수 서비스는 영구 채팅 서버의 선택적 구성 요소 이며, 영구적 채팅 준수 저장소에 채팅 콘텐츠 및 이벤트를 보관 하는 책임을 집니다. 조직에 영구 채팅 활동을 보관 해야 하는 규정이 있는 경우 선택적 영구 채팅 준수 서비스를 배포할 수 있습니다. 준수 서비스는 영구 채팅 풀의 각 영구 채팅 서버에 설치 됩니다. 이 구성을 사용 하는 경우 영구 채팅 서버 준수는 채팅방 참가 및 종료와 같은 사용자 활동을 기록 하 고 메시지를 게시 하 고 읽습니다. 준수 서비스는 영구 채팅 준수 파일 저장소에 보관 되어야 하는 파일을 저장 합니다.

</div>

<div>

## <a name="persistent-chat-web-services"></a>영구 채팅 웹 서비스

Lync Server 프런트 엔드 서버에는 IIS (인터넷 정보 서비스)에 종속 되 고 웹 구성 요소로 구현 되는 두 가지 서비스가 실행 됩니다.

  - **파일 업로드/다운로드를 위한 영구 채팅 웹 서비스** 채팅방에서 파일을 게시 하 고 검색 하는 책임을 집니다.

  - **채팅방 관리를 위한 영구 채팅 웹 서비스** 사용자에 게 채팅방을 관리 하 고 새 채팅방을 만들 수 있는 기능을 제공할 책임이 있습니다.

</div>

</div>

<div>

## <a name="how-do-i-start-using-persistent-chat-server"></a>영구 채팅 서버 사용을 시작 하려면 어떻게 하나요?

영구 채팅 서버는 Lync Server 2013 인프라 내의 선택적 서버 역할입니다. 영구 채팅 서버 역할을 설치 하는 경우 관리자가 정책을 통해 설정한 모든 사용자가 Lync 2013 클라이언트와 영구 채팅을 사용할 수 있습니다.

영구 채팅 서버를 배포 하 고 사용자가 정책에 따라 기능을 활용할 수 있도록 하는 방법에 대 한 자세한 내용은 [Lync server 2013에서 영구 채팅 서버 배포](lync-server-2013-deploying-persistent-chat-server.md)를 참조 하세요.

영구 채팅 서버 배포에서 설정을 구성 하는 방법에 대 한 자세한 내용은 [Lync server 2013에서 영구 채팅 서버 배포](lync-server-2013-deploying-persistent-chat-server.md) 및 [lync Server 2013, 영구 채팅 서버 관리](managing-lync-server-2013-persistent-chat-server.md)를 참조 하세요.

Lync 2013 클라이언트에서 영구 채팅 기능을 활용할 수 있도록 정책에서 사용자를 설정 하는 방법에 대 한 자세한 내용은 [Lync server 2013에서 영구 채팅 서버 배포](lync-server-2013-deploying-persistent-chat-server.md) 및 [lync Server 2013, 영구 채팅 서버 관리](managing-lync-server-2013-persistent-chat-server.md)를 참조 하세요.

영구 채팅 준수를 배포한 경우 준수를 위해 설정을 구성 하는 방법에 대 한 자세한 내용은 [Lync server 2013, 영구 채팅 서버 관리](managing-lync-server-2013-persistent-chat-server.md) 를 참조 하세요.

</div>

<div>

## <a name="persistent-chat-call-flows"></a>영구 채팅 통화 흐름

영구 채팅 클라이언트는 XCCOS를 사용 하 여 영구 채팅 서비스와 통신 합니다. 다음 순서는 로그인 프로세스와 일반적인 대화방 구독 및 메시지 게시 시나리오를 설명 합니다.

<div>

## <a name="sign-in"></a>로그인

다음의 호출 흐름 다이어그램 및 단계에서 로그인 프로세스를 설명 합니다.

**영구 채팅 클라이언트 로그인 통화 흐름**

![영구 채팅 서버 통화 흐름 다이어그램.] (images/JJ683096.9b3b3c61-caca-42b6-853c-6a09e6ff5c44(OCS.15).jpg "영구 채팅 서버 통화 흐름 다이어그램.")

1.  영구 채팅 클라이언트는 먼저 서버에서 대역내 프로비저닝 문서를 검색 하기 위해 SIP 구독을 보냅니다. 이 문서는 영구 채팅을 사용 하거나 사용 하지 않도록 설정 하 고 영구 채팅 서버 풀의 SIP Uri 목록에 대해 알려줍니다.

2.  영구 채팅 클라이언트는 이전 단계에서 받은 영구 채팅 서버의 SIP URI로 SIP 초대 메시지를 보냅니다. 초대 순서에는 200 OK와 ACK가 나타나고 영구 채팅 클라이언트는 이제 영구 채팅 서버 끝점을 사용 하 여 SIP 세션을 열었습니다. 따라서 영구 채팅 클라이언트는 동작을 수행 하도록 서버를 요청 하는 채팅 메시지 또는 명령이 포함 된 SIP 정보 메시지를 전송 하 여 영구 채팅 서버와 통신 합니다. 이러한 모든 메시지는 200 OK 또는 503 서비스를 사용할 수 없음 (즉, 서버 로드가 많은 경우)으로 승인 됩니다. 클라이언트가 503 응답을 수신 하는 경우에는 메시지를 다시 시도 합니다. 이 예제에는 503 응답이 포함 되어 있지 않습니다. 서버에서 메시지 또는 명령을 수락 하 고 200 OK를 보내면 별도의 SIP 정보 메시지 형식으로 클라이언트에 대 한 응답을 제공 합니다. 이 응답에는 원래 명령에 대 한 참조가 포함 됩니다.

3.  영구 채팅 클라이언트는 XCCOS **getserverinfo** 명령이 포함 된 SIP 정보 메시지를 보냅니다. 영구 채팅 서버는 영구 채팅 서비스 구성에 대 한 정보를 포함 하는 새로운 SIP 정보 메시지를 사용 하 여 회신 합니다.

4.  영구 채팅 클라이언트는 XCCOS **getassociations** 명령을 포함 하는 SIP 정보 메시지를 보냅니다. 영구 채팅 서버는 사용자가 구성원으로 속해 있는 채팅방 목록을 포함 하는 새로운 SIP 정보 메시지를 사용 하 여 회신 합니다. 영구 채팅 클라이언트는 명령을 반복 하 여 사용자가 관리자로 속해 있는 채팅방 목록을 검색 합니다.

5.  영구 채팅 클라이언트는 "현재 상태" 문서에서 팔 로우 하는 채팅방 목록을 가져오며,이는 팔 로우 하는 각 채팅방이 "roomSetting" 범주로 표시 됩니다. 팔 로우 하는 모든 채팅방은 대화방 uri 목록을 포함 하는 XCCOS **참여해 보세요** 명령을 포함 하는 단일 SIP 정보 메시지로 연결 됩니다. 팔 로우 채팅방 목록이 서버에 저장 되므로 컴퓨터의 모든 클라이언트에는 지정 된 사용자 URI에 대해 팔 로우 하는 채팅방의 목록이 있습니다. 또한 영구 채팅 클라이언트는 사용자가이 옵션을 사용 하도록 설정 된 경우 열려 있는 룸의 목록을 유지 하 고, 각 룸에 대 한 XCCOS **join** 명령이 포함 된 SIP 정보 메시지를 전송 하 여 로그인 할 때 각 채팅방에 참가 합니다. 이 목록은 레지스트리에 유지 되므로 다른 컴퓨터에서 실행 되는 두 개의 영구 채팅 클라이언트에 따라 다를 수 있습니다.

6.  연결 된 각 채팅방에 대해 영구 채팅 클라이언트는 XCCOS **bccontext** 명령이 포함 된 SIP INFO 메시지를 보냅니다. 영구 채팅 서버는 채팅방에 최신 채팅 메시지가 포함 된 새로운 SIP 정보 메시지를 사용 하 여 회신 합니다.

7.  영구 채팅 클라이언트는 XCCOS **getinv** (즉, 초대 받기) 명령이 포함 된 SIP 정보 메시지를 보내 클라이언트가 아직 표시 하지 않은 새 채팅방 초대를 요청 합니다. 별도의 SIP 정보 메시지에서 영구 채팅 서버는 해당 룸의 목록을 반환 합니다.

</div>

<div>

## <a name="subscribe-to-a-room-and-post-a-message"></a>채팅방에 가입 하 고 메시지 게시

다음의 호출 흐름 다이어그램 및 단계에서는 일반적인 회의실 구독 및 메시지 게시 시나리오에 대해 설명 합니다.

**영구 채팅 클라이언트 공간 구독 및 메시지 게시 통화 흐름**

![회의실 구독 및 메시지 게시 시나리오.] (images/JJ683096.2d3c417e-c91b-42bd-964e-285b72bb2e44(OCS.15).jpg "회의실 구독 및 메시지 게시 시나리오.")

1.  영구 채팅 클라이언트에서 User1이 채팅방 **참가**를 클릭 하 고 **검색**을 클릭 한 다음 몇 가지 검색 조건을 입력 합니다. 영구 채팅 클라이언트는 검색 조건과 함께 XCCOS **chansrch** (room 검색) 명령이 포함 된 SIP 정보 메시지를 보냅니다. 영구 채팅 서버 백 엔드 데이터베이스를 쿼리하고 검색 조건을 충족 하는 사용 가능한 회의실 목록이 포함 된 새 SIP 정보 메시지에 회신 합니다.

2.  User1이 자신이 참가 하려는 채팅방을 선택한 다음 **이 채팅방 팔 로우**를 클릭 합니다. 영구 채팅 클라이언트는 XCCOS **join** 명령 및 사용자가 선택한 채팅방의 룸 ID가 포함 된 SIP INFO 메시지를 영구 채팅 서버에 보냅니다. 영구 채팅 서버는 프로 비전 데이터를 포함 하는 SIP INFO 메시지와 함께 회신 합니다.

3.  영구 채팅 클라이언트는 XCCOS **bccontext** (backchat context) 명령이 포함 된 SIP 정보 메시지를 영구 채팅 서버에 보냅니다. 영구 채팅 서버 채팅 기록을 검색 하 고 별도의 SIP 정보 메시지에 있는 영구 채팅 클라이언트로 반환 합니다. 이 시점에서 사용자가 채팅방을 입력 하 고 참여할 준비가 된 것입니다.

4.  User1이 새 메시지를 입력 한 다음 **보내기를**클릭 합니다. 영구 채팅 클라이언트가 SIP INFO XCCOS **grpchat** 명령으로 메시지를 채팅방에 게시 합니다. 영구 채팅 서버는 영구 채팅 백 엔드 데이터베이스에이 새 메시지의 복사본을 저장 합니다.

5.  영구 채팅 서버는 이미 채팅방을 입력 한 **grpchat** 메시지의 별도 복사본을 XCCOS에 보냅니다.

</div>

</div>

<div>

## <a name="persistent-chat-compliance-call-flows"></a>영구 채팅 준수 통화 흐름

영구 채팅 서버는 메시지 대기열 (MSMQ 라고도 함) 및 준수 데이터를 처리 하는 추가 준수 데이터베이스 (mgccomp)를 사용 합니다. 규정 준수 이벤트가 처리 되는 방법의 예로, 다음 이벤트 순서에 따라 메시지 게시 이벤트가 처리 되는 방법이 설명 됩니다.

1.  사용자가 채팅방에 메시지를 게시 합니다.

2.  영구 채팅 서버는 개인 메시지 대기열 대기열에 이벤트와 관련 된 정보를 배치 합니다.

3.  영구 채팅 준수 서버는 큐에서이 이벤트를 읽고 나중에 처리 하기 위해 mgccomp 데이터베이스에 배치 합니다.

4.  영구 채팅 준수 서버는 정기적으로 데이터베이스의 이벤트 집합을 처리 하 고이를 지속적인 채팅 준수 어댑터로 전송 하 여 처리 합니다.

5.  어댑터가 데이터를 성공적으로 처리 하는 경우 영구 채팅 준수 서버가 mgccomp 데이터베이스에서 이벤트를 삭제 합니다.

</div>

</div>

<span> </span>

</div>

</div>

</div>

