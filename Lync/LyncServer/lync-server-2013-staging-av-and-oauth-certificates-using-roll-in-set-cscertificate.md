---
title: Set-CsCertificate 사용 하 여 준비 된 AV 및 OAuth 인증서
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
f1.keywords:
- NOCSH
TOCTitle: Staging AV and OAuth certificates using -Roll in Set-CsCertificate
ms:assetid: 22dec3cc-4b6b-4df2-b269-5b35df4731a7
ms:mtpsurl: https://technet.microsoft.com/en-us/library/JJ660292(v=OCS.15)
ms:contentKeyID: 49354387
ms.date: 07/23/2014
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: 003c8da4c953dc843fe49bf3fc5eb2d2a70b093b
ms.sourcegitcommit: 4d6bf5c58b2c553dc1df8375ede4a9cb9eaadff2
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/16/2020
ms.locfileid: "48533015"
---
# <a name="staging-av-and-oauth-certificates-in-lync-server-2013-using--roll-in-set-cscertificate"></a><span data-ttu-id="e66fc-102">Lync Server 2013에서 Set-CsCertificate을 사용 하 여 온-using-Roll의 AV 및 OAuth 인증서 준비</span><span class="sxs-lookup"><span data-stu-id="e66fc-102">Staging AV and OAuth certificates in Lync Server 2013 using -Roll in Set-CsCertificate</span></span>

<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="https://msdn.microsoft.com/">

<div data-asp="https://msdn2.microsoft.com/asp">



</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

<span data-ttu-id="e66fc-103">_**마지막으로 수정 된 항목:** 2012-11-13_</span><span class="sxs-lookup"><span data-stu-id="e66fc-103">_**Topic Last Modified:** 2012-11-13_</span></span>

<span data-ttu-id="e66fc-104">A/V (오디오/비디오) 통신은 Microsoft Lync Server 2013의 주요 구성 요소입니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-104">Audio/Video (A/V) communications is a key component of Microsoft Lync Server 2013.</span></span> <span data-ttu-id="e66fc-105">응용 프로그램 공유 및 오디오 및 비디오 회의와 같은 기능은 A/V에 지 서비스에 할당 된 인증서, 특히 A/V 인증 서비스에 의존 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-105">Features such as application sharing and audio and video conferencing rely on the certificates assigned to the A/V Edge service, specifically the A/V Authentication service.</span></span>

<div>


> [!IMPORTANT]
> <OL>
> <LI>
> <P><span data-ttu-id="e66fc-106">이 새로운 기능은 A/V에 지 서비스 및 <EM>Oauthtokenissuer</EM> 인증서에 작동 하도록 설계 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-106">This new feature is designed to work for the A/V Edge service and the <EM>OAuthTokenIssuer</EM> certificate.</span></span> <span data-ttu-id="e66fc-107">다른 인증서 유형은 A/V에 지 서비스 및 OAuth 인증서 유형과 함께 프로 비전 될 수 있지만 A/V에 지 서비스 인증서가 제공 하는 공존 동작은 도움이 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-107">Other certificate types can be provisioned along with the A/V Edge service and OAuth certificate type, but will not benefit from the coexistence behavior that the A/V Edge service certificate will.</span></span></P>
> <LI>
> <P><span data-ttu-id="e66fc-108">Microsoft Lync Server 2013 인증서를 관리 하는 데 사용 되는 Lync Server 관리 셸 cmdlet은 A/V에 지 서비스 인증서를 <EM>오디오 Videoauthentication</EM> 인증서 유형으로, Oauthtokenissuer 형식 <EM>OAuthTokenIssuer</EM>으로 서는이를 참조 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-108">The Lync Server Management Shell PowerShell cmdlets used to manage Microsoft Lync Server 2013 certificates refers to the A/V Edge service certificate as the <EM>AudioVideoAuthentication</EM> certificate type and the OAuthServer certificate as type <EM>OAuthTokenIssuer</EM>.</span></span> <span data-ttu-id="e66fc-109">이 항목의 나머지 부분에서는 인증서를 고유 하 게 식별 하기 위해 동일한 식별자 유형, <EM>오디오 Videoauthentication</EM> 및 <EM>Oauthtokenissuer</EM>를 참조 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-109">For the rest of this topic and to uniquely identify the certificates, they will be referred to by the same identifier type, <EM>AudioVideoAuthentication</EM> and <EM>OAuthTokenIssuer</EM>.</span></span></P></LI></OL>



</div>

<span data-ttu-id="e66fc-110">A/V 인증 서비스는 클라이언트 및 기타 A/V 소비자가 사용 하는 토큰을 발급 하는 역할을 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-110">The A/V Authentication service is responsible for issuing tokens that are used by clients and other A/V consumers.</span></span> <span data-ttu-id="e66fc-111">토큰은 인증서의 특성에서 생성 되며 인증서가 만료 되 면 새 인증서에서 생성 된 새 토큰을 사용 하 여 다시 참가 하기 위한 연결 및 요구 사항이 손실 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-111">The tokens are generated from attributes on the certificate, and when the certificate expires, loss of connection and requirement to rejoin with a new token generated by the new certificate will result.</span></span> <span data-ttu-id="e66fc-112">Lync Server 2013의 새로운 기능을 통해이 문제를 완화할 수 있으며, 이전 인증서가 만료 되는 시점을 새로운 상태로 유지 하 고 두 인증서를 모두 일정 기간 동안 계속 작동 하도록 허용할 능력이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-112">A new feature in Lync Server 2013 will alleviate this problem – the ability to stage a new certificate in advance of the old one expiring and allowing both certificates to continue to function for a period of time.</span></span> <span data-ttu-id="e66fc-113">이 기능은 Set-CsCertificate Lync Server Management Shell cmdlet에서 업데이트 된 기능을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-113">This feature uses updated functionality in the Set-CsCertificate Lync Server Management Shell cmdlet.</span></span> <span data-ttu-id="e66fc-114">기존 매개 변수-EffectiveDate를 사용 하는 새 매개 변수-롤은 새 오디오 Videoauthentication 인증서를 인증서 저장소에 배치 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-114">The new parameter –Roll, with the existing parameter –EffectiveDate, will place the new AudioVideoAuthentication certificate in the certificate store.</span></span> <span data-ttu-id="e66fc-115">이전 오디오 Videoauthentication 인증서는 여전히 발급 된 토큰의 유효성을 검사 하기 위해 계속 유지 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-115">The older AudioVideoAuthentication certificate will still remain for issued tokens to be validated against.</span></span> <span data-ttu-id="e66fc-116">새 오디오 Videoauthentication 인증서를 현재 위치에 배치 하면 다음과 같은 일련의 이벤트가 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-116">Beginning with putting the new AudioVideoAuthentication certificate in place, the following series of events will occur:</span></span>

<div>


> [!TIP]
> <span data-ttu-id="e66fc-117">Lync Server 관리 셸 cmdlet을 사용 하 여 인증서를 관리 하는 경우에 지 서버에서 각 용도 마다 별도의 인증서를 요청할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-117">Using the Lync Server Management Shell cmdlets for managing certificates, you can request separate and distinct certificates for each purpose on the Edge Server.</span></span> <span data-ttu-id="e66fc-118">Lync Server 배포 마법사에서 인증서 마법사를 사용 하면 인증서를 만들 수 있지만 일반적으로 모든 인증서에 대해에 지 서버에서 단일 인증서로 사용 하는 <STRONG>기본</STRONG> 유형이 couples 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-118">Using the Certificate Wizard in the Lync Server Deployment Wizard assists you in creating certificates, but is typically of the <STRONG>default</STRONG> type which couples all certificate uses for the Edge Server onto a single certificate.</span></span> <span data-ttu-id="e66fc-119">롤링 인증서 기능을 사용 하려는 경우에는 다른 인증서 용도 로부터 오디오 Videoauthentication 인증서를 분리 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-119">The recommended practice if you are going to use the rolling certificate feature is to decouple the AudioVideoAuthentication certificate from the other certificate purposes.</span></span> <span data-ttu-id="e66fc-120">기본 유형의 인증서를 프로 비전 하 고 준비할 수 있지만 결합 된 인증서의 오디오 Videoauthentication 부분만 준비를 통해 혜택을 받습니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-120">You can provision and stage a certificate of the Default type, but only the AudioVideoAuthentication portion of the combined certificate will benefit from the staging.</span></span> <span data-ttu-id="e66fc-121">인증서가 만료 되는 경우 인스턴트 메시징 대화 (예:)는 액세스에 지 서비스와 연결 된 새 인증서를 사용 하기 위해 로그 아웃 하 고 다시 로그인 해야 하는 사용자입니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-121">A user involved in (for example) an instant messaging conversation when the certificate expires will need to log out and log back in to make use of the new certificate associated with the Access Edge service.</span></span> <span data-ttu-id="e66fc-122">웹 회의에 지 서비스를 사용 하 여 웹에 관여 하는 사용자에 게 비슷한 동작이 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-122">Similar behavior will occur for a user involved in a Web conference using the Web Conferencing Edge service.</span></span> <span data-ttu-id="e66fc-123">OAuthTokenIssuer 인증서는 모든 서버에서 공유 되는 특정 유형입니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-123">The OAuthTokenIssuer certificate is a specific type that is shared across all servers.</span></span> <span data-ttu-id="e66fc-124">한 위치에서 인증서를 만들고 관리 하 고 인증서가 중앙 관리 저장소에 다른 모든 서버에 대해 저장 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-124">You create and manage the certificate in one place and the certificate is stored in the Central Management store for all other servers.</span></span>



</div>

<span data-ttu-id="e66fc-125">Set-CsCertificate cmdlet을 사용 하 고이를 사용 하 여 현재 인증서가 만료 되기 전에 인증서를 준비 하는 경우 옵션 및 요구 사항을 완전히 이해 하려면 추가 정보가 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-125">Additional detail is needed to fully understand your options and requirements when using the Set-CsCertificate cmdlet and using it to stage certificates prior to the current certificate expiring.</span></span> <span data-ttu-id="e66fc-126">– Roll 매개 변수는 중요 하지만 기본적으로 단일 용도로만 제공 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-126">The –Roll parameter is important, but essentially single purpose.</span></span> <span data-ttu-id="e66fc-127">매개 변수로 정의 하는 경우에는 인증서가 – EffectiveDate에서 정의 되는 것 처럼 영향을 받을 인증서에 대 한 정보 (예: AudioVideoAuthentication 및 OAuthTokenIssuer)가 제공 됨을 알리는 것을 Set-CsCertificate 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-127">If you define it as a parameter, you are telling Set-CsCertificate that you will be providing information about the certificate that will be affected defined by –Type (for example AudioVideoAuthentication and OAuthTokenIssuer), when the certificate will become effective defined by –EffectiveDate.</span></span>

<span data-ttu-id="e66fc-128">**-롤:** – Roll 매개 변수는 필수 이며 종속성과 함께 함께 제공 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-128">**-Roll:** The –Roll parameter is required and has dependencies that must be supplied along with it.</span></span> <span data-ttu-id="e66fc-129">영향을 받는 인증서와 적용 방법을 완전 하 게 정의 하는 데 필요한 매개 변수:</span><span class="sxs-lookup"><span data-stu-id="e66fc-129">Required parameters to fully define which certificates will be affected and how they will be applied:</span></span>

<span data-ttu-id="e66fc-130">**-EffectiveDate:** -EffectiveDate 매개 변수는 새 인증서가 현재 인증서를 사용 하 여 공동 활성 상태가 되는 시기를 정의 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-130">**-EffectiveDate:** The parameter –EffectiveDate defines when the new certificate will become co-active with the current certificate.</span></span> <span data-ttu-id="e66fc-131">– EffectiveDate은 현재 인증서의 만료 시간에 근접 하거나 시간이 길어질 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-131">The –EffectiveDate can be close to the expiry time of the current certificate, or it can be a longer period of time.</span></span> <span data-ttu-id="e66fc-132">오디오 Videoauthentication 인증서에 대 한 권장 최소 – EffectiveDate 8 시간이 며,이는 오디오 Videoauthentication 인증서를 사용 하 여 발급 된 AV에 지 서비스 토큰의 기본 토큰 수명입니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-132">A recommended minimum –EffectiveDate for the AudioVideoAuthentication certificate would be 8 hours, which is the default token lifetime for AV Edge service tokens issued using the AudioVideoAuthentication certificate.</span></span>

<span data-ttu-id="e66fc-133">OAuthTokenIssuer 인증서를 준비할 때 선행 시간에 대 한 요구 사항에 따라 인증서가 유효 해질 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-133">When staging OAuthTokenIssuer certificates, there are different requirements for the lead time before the certificate can become effective.</span></span> <span data-ttu-id="e66fc-134">OAuthTokenIssuer 인증서가 선행 시간에 대해 수행 해야 하는 최소 시간은 현재 인증서의 만료 시간 보다 24 시간이 하입니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-134">The minimum time that the OAuthTokenIssuer certificate should have for its lead time is 24 hours before the expiration time of the current certificate.</span></span> <span data-ttu-id="e66fc-135">확장 된 리드 타임 인은 인증서가 생성 된 인증 및 암호화 키 자료에 대 한 보존 시간이 길수록 OAuthTokenIssuer 인증서 (예: Exchange Server)에 종속 된 다른 서버 역할로 인해 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-135">The extended lead time for the coexistence is because of other server roles that are dependent on the OAuthTokenIssuer certificate (Exchange Server, for example) which has a longer retention time for certificate created authentication and encryption key materials.</span></span>

<span data-ttu-id="e66fc-136">**-지문:** 손도장은 해당 인증서에 고유한 인증서의 특성입니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-136">**-Thumbprint:** The thumbprint is an attribute on the certificate that is unique to that certificate.</span></span> <span data-ttu-id="e66fc-137">-Thumbprint 매개 변수는 Set-CsCertificate cmdlet의 작업에 영향을 받는 인증서를 식별 하는 데 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-137">The –Thumbprint parameter is used to identify the certificate that will be affected by the actions of the Set-CsCertificate cmdlet.</span></span>

<span data-ttu-id="e66fc-138">**-Type:** – Type 매개 변수는 단일 인증서 사용 유형 또는 쉼표로 구분 된 인증서 사용 유형 목록을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-138">**-Type:** The –Type parameter can accept a single certificate usage type or a comma separated list of certificate usage types.</span></span> <span data-ttu-id="e66fc-139">인증서 유형은 cmdlet 및 서버에서 인증서의 용도를 식별 하는 유형입니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-139">The certificate types are those that identify to the cmdlet and to the server what the purpose of the certificate is.</span></span> <span data-ttu-id="e66fc-140">예를 들어 A/V에 지 서비스 및 AV 인증 서비스에서 다음을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-140">For example, type AudioVideoAuthentication is for use by the A/V Edge service and the AV Authentication service.</span></span> <span data-ttu-id="e66fc-141">다른 유형의 인증서를 준비 하 고 동시에 프로 비전 하는 경우에는 인증서에 대해 가장 오래 걸리는 최소 실제 소요 시간을 고려해 야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-141">If you decide to stage and provision certificates of a different type at the same time, you must consider the longest required minimum effective lead time for the certificates.</span></span> <span data-ttu-id="e66fc-142">예를 들어,에는 오디오 Videoauthentication 및 OAuthTokenIssuer 유형의 인증서를 준비 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-142">For example, you need to stage certificates of type AudioVideoAuthentication and OAuthTokenIssuer.</span></span> <span data-ttu-id="e66fc-143">최소-EffectiveDate은 두 인증서 중 큰 값 이어야 합니다 (이 경우에는 최소 소요 시간이 24 시간인 OAuthTokenIssuer).</span><span class="sxs-lookup"><span data-stu-id="e66fc-143">Your minimum –EffectiveDate must be the greater of the two certificates, in this case the OAuthTokenIssuer, which has a minimum lead time of 24 hours.</span></span> <span data-ttu-id="e66fc-144">리드 인 24 시간 동안 오디오 Videoauthentication 인증서를 준비 하지 않으려면 요구 사항이 더 많은 EffectiveDate와 별도로 준비 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-144">If you do not want to stage the AudioVideoAuthentication certificate with a lead time of 24 hours, stage it separately with an EffectiveDate that is more to your requirements.</span></span>

<div>

## <a name="to-update-or-renew-an-av-edge-service-certificate-with-a-roll-and--effectivedate-parameters"></a><span data-ttu-id="e66fc-145">-Roll 및-EffectiveDate 매개 변수를 사용 하 여 A/V에 지 서비스 인증서를 업데이트 하거나 갱신 하려면</span><span class="sxs-lookup"><span data-stu-id="e66fc-145">To update or renew an A/V Edge service certificate with a –Roll and -EffectiveDate parameters</span></span>

1.  <span data-ttu-id="e66fc-146">Administrators 그룹의 구성원으로 로컬 컴퓨터에 로그온 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-146">Log on to the local computer as a member of the Administrators group.</span></span>

2.  <span data-ttu-id="e66fc-147">A/V에 지 서비스에서 기존 인증서에 대해 내보낼 수 있는 개인 키를 사용 하 여 갱신 또는 새 오디오 Videoauthentication 인증서를 요청 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-147">Request a renewal or new AudioVideoAuthentication certificate with exportable private key for the existing certificate on the A/V Edge service.</span></span>

3.  <span data-ttu-id="e66fc-148">풀에 있는에 지 서버 및 다른 모든에 지 서버로 새 오디오 Videoauthentication 인증서를 가져옵니다 (풀이 배포 된 경우).</span><span class="sxs-lookup"><span data-stu-id="e66fc-148">Import the new AudioVideoAuthentication certificate to the Edge Server and all other Edge Server in your pool (if you have a pool deployed).</span></span>

4.  <span data-ttu-id="e66fc-149">Set-CsCertificate cmdlet을 사용 하 여 가져온 인증서를 구성 하 고 – EffectiveDate 매개 변수와 함께 – Roll 매개 변수를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-149">Configure the imported certificate with the Set-CsCertificate cmdlet and use the –Roll parameter with the –EffectiveDate parameter.</span></span> <span data-ttu-id="e66fc-150">유효 날짜는 현재 인증서 만료 시간 (14:00:00 또는 2:00:00 PM)에서 토큰 수명 (기본값 8 시간)을 뺀 값으로 정의 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-150">The effective date should be defined as the current certificate expire time (14:00:00, or 2:00:00 PM) minus token lifetime (by default eight hours).</span></span> <span data-ttu-id="e66fc-151">이를 통해 인증서를 활성으로 설정 해야 할 시간이 제공 되 고-EffectiveDate \<string\> : "7/22/2012 6:00:00 AM"이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-151">This gives us a time that the certificate must be set to active, and is the –EffectiveDate \<string\>: “7/22/2012 6:00:00 AM”.</span></span>
    
    <div>
    

    > [!IMPORTANT]
    > <span data-ttu-id="e66fc-152">에 지 풀의 경우에는 새 인증서를 사용 하 여 모든 클라이언트 및 소비자 토큰이 갱신 되기 전에 이전 인증서가 만료 될 때까지 가능한 한 A/V 통신 중단을 방지 하기 위해 배포 된 첫 번째 인증서의 – EffectiveDate 매개 변수에서 지정한 날짜 및 시간까지 모든 오디오 Videoauthentication 인증서를 배포 하 고 프로 비전 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-152">For an Edge pool, you must have all AudioVideoAuthentication certificates deployed and provisioned by the date and time defined by the –EffectiveDate parameter of the first certificate deployed to avoid possible A/V communications disruption due to the older certificate expiring before all client and consumer tokens have been renewed using the new certificate.</span></span>

    
    </div>
    
    <span data-ttu-id="e66fc-153">-Roll 및 – EffectiveTime 매개 변수를 사용 하는 Set-CsCertificate 명령은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-153">The Set-CsCertificate command with the –Roll and –EffectiveTime parameter:</span></span>
    
        Set-CsCertificate -Type AudioVideoAuthentication -Thumbprint <thumb print of new certificate> -Roll -EffectiveDate <date and time for certificate to become active>
    
    <span data-ttu-id="e66fc-154">다음은 Set-CsCertificate 명령 예입니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-154">An example Set-CsCertificate command:</span></span>
    
        Set-CsCertificate -Type AudioVideoAuthentication -Thumbprint "B142918E463981A76503828BB1278391B716280987B" -Roll -EffectiveDate "7/22/2012 6:00:00 AM"
    
    <div>
    

    > [!IMPORTANT]
    > <span data-ttu-id="e66fc-155">EffectiveDate 서버의 국가 및 언어 설정과 일치 하도록 형식을 지정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-155">The EffectiveDate must be formatted to match your server’s region and language settings.</span></span> <span data-ttu-id="e66fc-156">이 예제에서는 미국 영어 국가 및 언어 설정을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-156">The example uses the US English Region and Language settings</span></span>

    
    </div>

<span data-ttu-id="e66fc-157">Set-cscertificate,-Roll 및-EffectiveDate에서 새 오디오 Videoauthentication 토큰을 발급 하기 위해 새 인증서를 준비 하는 데 사용 되는 프로세스를 추가로 이해 하기 위해 기존 인증서를 사용 하 여 소비자가 사용 하는 오디오 비디오 인증의 유효성을 검사 하는 동시에, visual 타임 라인은 프로세스를 이해 하는 효율적인 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-157">To further understand the process that Set-CsCertificate, -Roll, and –EffectiveDate use to stage a new certificate for issuing new AudioVideoAuthentication tokens while still using an existing certificate to validate AudioVideoAuthentication that are in use by consumers, a visual timeline is an effective means of understanding the process.</span></span>

<span data-ttu-id="e66fc-158">다음 예에서 관리자는 A/V에 지 서비스 인증서가 07/22/2012에서 오후 2:00:00 시에 만료 되는 것으로 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-158">In the following example, the administrator determines that the A/V Edge service certificate is due to expire at 2:00:00 PM on 07/22/2012.</span></span> <span data-ttu-id="e66fc-159">새 인증서를 요청 하 고 수신 하 여 해당 풀의 각에 지 서버로 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-159">He requests and receives a new certificate and imports it to each Edge Server in his pool.</span></span> <span data-ttu-id="e66fc-160">오전 2 시 07/22/2012에는 새 인증서의 지문 문자열과 같은 Get-CsCertificate 실행을 시작 하 고-EffectiveTime를 07/22/2012 6:00:00 AM으로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-160">At 2 AM on 07/22/2012, he begins running Get-CsCertificate with –Roll, -Thumbprint equal to the thumbprint string of the new certificate, and –EffectiveTime set to 07/22/2012 6:00:00 AM.</span></span> <span data-ttu-id="e66fc-161">각에 지 서버에서이 명령을 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-161">He runs this command on each Edge Server.</span></span>

<span data-ttu-id="e66fc-162">![롤 및 EffectiveDate 매개 변수 사용](images/JJ660292.21d51a76-0d03-4ed7-a37e-a7c14940265f(OCS.15).jpg "롤 및 EffectiveDate 매개 변수 사용")</span><span class="sxs-lookup"><span data-stu-id="e66fc-162">![Using the Roll and the EffectiveDate parameters.](images/JJ660292.21d51a76-0d03-4ed7-a37e-a7c14940265f(OCS.15).jpg "Using the Roll and the EffectiveDate parameters.")</span></span>

<span data-ttu-id="e66fc-163">유효 시간에 도달 하면 (7/22/2012 6:00:00 AM) 새 인증서에서 모든 새 토큰을 발급 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-163">When the effective time is reached (7/22/2012 6:00:00 AM), all new tokens are issued by the new certificate.</span></span> <span data-ttu-id="e66fc-164">토큰의 유효성을 검사 하는 경우 새 인증서에 대해 토큰의 유효성을 먼저 검사 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-164">When validating tokens, tokens will first be validated against the new certificate.</span></span> <span data-ttu-id="e66fc-165">유효성 검사가 실패 하면 이전 인증서가 시도 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-165">If the validation fails, the old certificate is tried.</span></span> <span data-ttu-id="e66fc-166">이전 인증서의 만료 시간까지 새로 만들기를 시도 하는 프로세스는 계속 진행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-166">The process of trying the new and falling back to the old certificate will continue until the expiry time of the old certificate.</span></span> <span data-ttu-id="e66fc-167">이전 인증서가 만료 된 경우 (7/22/2012 2:00:00 PM), 새 인증서로만 토큰의 유효성을 검사 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-167">Once the old certificate has expired (7/22/2012 2:00:00 PM), tokens will only be validated by the new certificate.</span></span> <span data-ttu-id="e66fc-168">이전 인증서는 – Previous 매개 변수와 함께 Remove-CsCertificate cmdlet을 사용 하 여 안전 하 게 제거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-168">The old certificate can be safely removed using the Remove-CsCertificate cmdlet with the –Previous parameter.</span></span>

    Remove-CsCertificate -Type AudioVideoAuthentication -Previous

</div>

<div>

## <a name="to-update-or-renew-an-oauthtokenissuer-certificate-with-a-roll-and--effectivedate-parameters"></a><span data-ttu-id="e66fc-169">-Roll 및-EffectiveDate 매개 변수를 사용 하 여 OAuthTokenIssuer 인증서를 업데이트 하거나 갱신 하려면</span><span class="sxs-lookup"><span data-stu-id="e66fc-169">To update or renew an OAuthTokenIssuer certificate with a –Roll and -EffectiveDate parameters</span></span>

1.  <span data-ttu-id="e66fc-170">Administrators 그룹의 구성원으로 로컬 컴퓨터에 로그온 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-170">Log on to the local computer as a member of the Administrators group.</span></span>

2.  <span data-ttu-id="e66fc-171">A/V에 지 서비스에서 기존 인증서에 대해 내보낼 수 있는 개인 키를 사용 하 여 갱신 또는 새 OAuthTokenIssuer 인증서를 요청 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-171">Request a renewal or new OAuthTokenIssuer certificate with exportable private key for the existing certificate on the A/V Edge service.</span></span>

3.  <span data-ttu-id="e66fc-172">풀을 배포한 경우 새 OAuthTokenIssuer 인증서를 해당 풀의 프런트 엔드 서버로 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-172">Import the new OAuthTokenIssuer certificate to a Front End Server in your pool (if you have a pool deployed).</span></span> <span data-ttu-id="e66fc-173">OAuthTokenIssuer 인증서는 전역적으로 복제 되며, 배포의 모든 서버에서 업데이트 및 갱신 하기만 하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-173">The OAuthTokenIssuer certificate is replicated globally and only needs to be updated and renewed at any server in your deployment.</span></span> <span data-ttu-id="e66fc-174">프런트 엔드 서버는 예제로 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-174">The Front End Server is used as an example.</span></span>

4.  <span data-ttu-id="e66fc-175">Set-CsCertificate cmdlet을 사용 하 여 가져온 인증서를 구성 하 고 – EffectiveDate 매개 변수와 함께 – Roll 매개 변수를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-175">Configure the imported certificate with the Set-CsCertificate cmdlet and use the –Roll parameter with the –EffectiveDate parameter.</span></span> <span data-ttu-id="e66fc-176">유효 날짜는 현재 인증서 만료 시간 (14:00:00 또는 2:00:00 PM)에서 최소 24 시간을 뺀 값으로 정의 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-176">The effective date should be defined as the current certificate expire time (14:00:00, or 2:00:00 PM) minus a minimum of 24 hours.</span></span>
    
    <span data-ttu-id="e66fc-177">-Roll 및 – EffectiveTime 매개 변수를 사용 하는 Set-CsCertificate 명령은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-177">The Set-CsCertificate command with the –Roll and –EffectiveTime parameter:</span></span>
    
        Set-CsCertificate -Type OAuthTokenIssuer -Thumbprint <thumb print of new certificate> -Roll -EffectiveDate <date and time for certificate to become active>
    
    <span data-ttu-id="e66fc-178">다음은 Set-CsCertificate 명령 예입니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-178">An example Set-CsCertificate command:</span></span>
    
        Set-CsCertificate -Type OAuthTokenIssuer -Thumbprint "B142918E463981A76503828BB1278391B716280987B" -Roll -EffectiveDate "7/21/2012 1:00:00 PM"
    
    <div>
    

    > [!IMPORTANT]
    > <span data-ttu-id="e66fc-179">EffectiveDate 서버의 국가 및 언어 설정과 일치 하도록 형식을 지정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-179">The EffectiveDate must be formatted to match your server’s region and language settings.</span></span> <span data-ttu-id="e66fc-180">이 예제에서는 미국 영어 국가 및 언어 설정을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-180">The example uses the US English Region and Language settings</span></span>

    
    </div>

<span data-ttu-id="e66fc-181">유효 시간에 도달 하면 (7/21/2012 1:00:00 AM) 새 인증서에서 모든 새 토큰을 발급 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-181">When the effective time is reached (7/21/2012 1:00:00 AM), all new tokens are issued by the new certificate.</span></span> <span data-ttu-id="e66fc-182">토큰의 유효성을 검사 하는 경우 새 인증서에 대해 토큰의 유효성을 먼저 검사 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-182">When validating tokens, tokens will first be validated against the new certificate.</span></span> <span data-ttu-id="e66fc-183">유효성 검사가 실패 하면 이전 인증서가 시도 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-183">If the validation fails, the old certificate is tried.</span></span> <span data-ttu-id="e66fc-184">이전 인증서의 만료 시간까지 새로 만들기를 시도 하는 프로세스는 계속 진행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-184">The process of trying the new and falling back to the old certificate will continue until the expiry time of the old certificate.</span></span> <span data-ttu-id="e66fc-185">이전 인증서가 만료 된 경우 (7/22/2012 2:00:00 PM), 새 인증서로만 토큰의 유효성을 검사 합니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-185">Once the old certificate has expired (7/22/2012 2:00:00 PM), tokens will only be validated by the new certificate.</span></span> <span data-ttu-id="e66fc-186">이전 인증서는 – Previous 매개 변수와 함께 Remove-CsCertificate cmdlet을 사용 하 여 안전 하 게 제거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e66fc-186">The old certificate can be safely removed using the Remove-CsCertificate cmdlet with the –Previous parameter.</span></span>

    Remove-CsCertificate -Type OAuthTokenIssuer -Previous

</div>

<div>

## <a name="see-also"></a><span data-ttu-id="e66fc-187">참고 항목</span><span class="sxs-lookup"><span data-stu-id="e66fc-187">See Also</span></span>


[<span data-ttu-id="e66fc-188">Lync Server 2013의에 지 서버 인증서 계획</span><span class="sxs-lookup"><span data-stu-id="e66fc-188">Plan for Edge Server certificates in Lync Server 2013</span></span>](lync-server-2013-plan-for-edge-server-certificates.md)  
[<span data-ttu-id="e66fc-189">Lync Server 2013에서 서버 간 인증 (OAuth) 및 파트너 응용 프로그램 관리</span><span class="sxs-lookup"><span data-stu-id="e66fc-189">Managing server-to-server authentication (OAuth) and partner applications in Lync Server 2013</span></span>](lync-server-2013-managing-server-to-server-authentication-oauth-and-partner-applications.md)  


[<span data-ttu-id="e66fc-190">Lync Server 2013에 대 한에 지 인증서 설정</span><span class="sxs-lookup"><span data-stu-id="e66fc-190">Set up Edge certificates for Lync Server 2013</span></span>](lync-server-2013-set-up-edge-certificates.md)  
<span data-ttu-id="e66fc-191">[Set-cscertificate](https://technet.microsoft.com/library/Gg398518(v=OCS.15))</span><span class="sxs-lookup"><span data-stu-id="e66fc-191">[Set-CsCertificate](https://technet.microsoft.com/library/Gg398518(v=OCS.15))</span></span>  
<span data-ttu-id="e66fc-192">[Set-cscertificate을 제거 합니다.](https://technet.microsoft.com/library/Gg412895(v=OCS.15))</span><span class="sxs-lookup"><span data-stu-id="e66fc-192">[Remove-CsCertificate](https://technet.microsoft.com/library/Gg412895(v=OCS.15))</span></span>  
  

</div>

</div>

<span> </span>

</div>

</div>

</div>

