---
title: 비즈니스용 Skype 서버의 백 엔드 서버에 Always On 가용성 그룹 배포
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
audience: ITPro
ms.topic: get-started-article
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: c93c01e6-626c-40ad-92dd-373b0fe9189f
description: 비즈니스용 Skype 서버 배포에서 Always On 가용성 그룹을 배포 (설치) 합니다.
ms.openlocfilehash: a01953abbf2233eab91c4a141580e8c452858934
ms.sourcegitcommit: ab47ff88f51a96aaf8bc99a6303e114d41ca5c2f
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 05/20/2019
ms.locfileid: "36196975"
---
# <a name="deploy-an-always-on-availability-group-on-a-back-end-server-in-skype-for-business-server"></a>비즈니스용 Skype 서버의 백 엔드 서버에 Always On 가용성 그룹 배포
 
비즈니스용 Skype 서버 배포에서 AG (항상 On 가용성 그룹)를 배포 (설치) 합니다.
  
AG를 배포 하는 방법은 미러를 사용 하는 기존 풀에 배포 하 고 있는지 여부 또는 현재 백 엔드 데이터베이스에 대 한 가용성이 높은 기존 풀에 배포할지에 따라 달라 집니다.
  
> [!NOTE]
> 영구 채팅 서버 역할에서 AG를 사용 하는 것은 지원 되지 않습니다. 
  
- [새 프런트 엔드 풀에 Always On 가용성 그룹 배포](alwayson-availability-group.md#BKMK_NewPool_CreateAlwaysOnGroup)
    
- [데이터베이스 미러링을 사용 하는 기존 풀에 Always On 가용성 그룹 배포](alwayson-availability-group.md#BKMK_MirroredPool_CreateAlwaysOnGroup)
    
- [데이터베이스 미러링을 사용 하지 않는 기존 풀에 Always On 가용성 그룹 배포](alwayson-availability-group.md#BKMK_NoHAPool_CreateAlwaysOnGroup)
    
## <a name="deploy-an-always-on-availability-group-on-a-new-front-end-pool"></a>새 프런트 엔드 풀에 Always On 가용성 그룹 배포
<a name="BKMK_NewPool_CreateAlwaysOnGroup"> </a>

1. AG에 포함 되는 모든 데이터베이스 서버에서 장애 조치 클러스터링 기능을 사용 하도록 설정 합니다. 각 서버에서 다음을 수행 합니다.
    
   - 서버 관리자를 열고 **역할 및 기능 추가**를 클릭 합니다.
    
   - **기능 선택** 상자에 도달할 때까지 **다음** 을 클릭 합니다. **장애 조치 클러스터링** 확인란을 선택 합니다.
    
   - **장애 조치 클러스터링용으로 필요한 기능 추가** 상자에서 **기능 추가**를 클릭 합니다.
    
   - **설치**를 클릭 합니다.
    
2. 클러스터 구성의 유효성을 검사 합니다.
    
   - 서버 관리자에서 **도구** 메뉴를 클릭 한 다음 **장애 조치 클러스터 관리자**를 클릭 합니다.
    
   - 화면 오른쪽에 있는 **작업** 에서 **구성 유효성 검사**를 클릭 합니다.
    
   - **시작 하기 전에** 페이지에서 **다음**을 클릭 합니다.
    
   - 클러스터에 추가할 서버를 선택 하 고 **모든 테스트 실행**을 클릭 합니다.
    
   - **요약** 상자에서 마법사가 보고 하는 오류를 확인 합니다. 그런 다음 **마침을** 클릭 하 여 유효성 검사를 완료 합니다.
    
     특히 공유 저장소를 사용 하지 않는 경우 마법사에서 여러 가지 경고를 보고할 수 있습니다. 공유 저장소를 사용할 필요는 없습니다. 그러나 **오류** 메시지가 표시 되는 경우 계속 하기 전에 해당 문제를 해결 해야 합니다.
    
3. WSFC (Windows Server 장애 조치 (Failover) 클러스터)를 만듭니다.
    
   - **장애 조치 (Failover) 클러스터 관리** 마법사에서 **장애 조치 클러스터 관리**를 마우스 오른쪽 단추로 클릭 한 다음 **클러스터 만들기**를 클릭 합니다.
    
   - **시작 하기 전에** 페이지에서 **다음**을 클릭 합니다.
    
   - 클러스터 이름 및 IP 주소를 추가 합니다. 설정이 확인 되 면 **다음**을 클릭 합니다.
    
   - 확인 페이지에서 **다음**을 클릭 합니다.
    
   - 클러스터를 만든 후 **마침을**클릭 합니다.
    
4. 파일 공유 감시를 사용 하도록 클러스터 쿼럼 설정을 구성 하는 것이 좋습니다. 이렇게 하려면 다음 단계를 사용 합니다.
    
   - 클러스터 이름을 마우스 오른쪽 단추로 클릭 하 고 **기타 작업**을 클릭 한 다음 **클러스터 쿼럼 설정 구성을**클릭 합니다.
    
   - **쿼럼 구성 옵션 선택** 페이지에서 **쿼럼 감시 선택**을 클릭 합니다.
    
   - **쿼럼 감시 선택** 페이지에서 **파일 공유 감시 구성을**클릭 합니다.
    
   - **파일 공유 감시 구성** 페이지에서 사용할 파일 공유 경로를 입력 하 고 **다음**을 클릭 합니다.
    
   - **확인** 페이지에서 **다음**을 클릭 합니다.
    
5. 클러스터의 각 서버에서 SQL Server 구성 관리자의 AG 기능을 사용 하도록 설정 합니다.
    
   - SQL Server 구성 관리자를 엽니다. 화면 왼쪽의 트리에서 **Sql Server 서비스**를 클릭 한 다음 sql server 서비스를 두 번 클릭 합니다. 
    
   - **속성** 상자에서 **alwayson** 고가용성 탭을 선택 합니다. **alwayson 가용성 그룹 사용** 확인란을 선택 합니다. 메시지가 표시 되 면 SQL Server 서비스를 다시 시작 합니다.
   
6. 비즈니스용 [Skype 서버에서 새 토폴로지 만들기 및 게시](../../deploy/install/create-and-publish-new-topology.md)에 설명 된 대로 토폴로지 작성기를 사용 하 여 프런트 엔드 풀을 만듭니다. 이 작업을 수행 하는 경우 AG를 풀에 대 한 SQL store로 지정 합니다.
    
7. 가용성 그룹을 만듭니다.
    
   - SQL Server Management Studio를 열고 SQL Server 인스턴스에 연결 합니다.
    
   - 개체 탐색기에서 **Always On 고가용성** 폴더를 확장 합니다. **가용성 그룹** 폴더를 마우스 오른쪽 단추로 클릭 하 고 **새 가용성 그룹 마법사**를 클릭 합니다.
    
   - **소개** 페이지가 나타나면 **다음**을 클릭 합니다.
    
   - **가용성 그룹 이름 지정** 페이지에서 가용성 그룹의 이름을 입력 하 고 **다음**을 클릭 합니다.
    
   - 데이터베이스 선택 페이지에서 AlwaysOn 가용성 그룹에 포함 하려는 데이터베이스를 선택 합니다. 그런 후 **다음**을 클릭 합니다.
    
     이 시나리오에서는 지원 되지 않으므로, AlwaysOn 가용성 그룹에 **ReportServer**, **reportservertempdb**또는 영구 채팅 데이터베이스를 포함 하지 마세요. 다른 모든 비즈니스용 Skype 서버 데이터베이스를 AlwaysOn 가용성 그룹에 포함할 수 있습니다.
    
   - **복제본 지정** 페이지에서 **복제본** 탭을 클릭 합니다. 그런 다음 **복제본 추가** 단추를 클릭 하 고 Windows Server 장애 조치 (Failover) 클러스터의 노드로 가입한 다른 SQL 인스턴스에 연결 합니다.
    
   - 각 인스턴스에 대해 **자동 장애 조치** 및 **동기 커밋** 옵션을 선택 합니다. **읽을 수 있는 보조** 옵션을 선택 하지 마세요.
    
   - **끝점** 탭을 클릭 하 고 **포트 번호가** 5022로 설정 되어 있는지 확인 합니다.
    
   - **수신기** 탭을 클릭 하 고 **가용성 그룹 수신기 만들기** 옵션을 선택 합니다. 이 옵션 아래에 수신기의 이름을 입력 하 고 **포트** 를 1433로 설정 합니다 (다른 포트는이 옵션에 지원 되지 않음).
    
   - **추가**를 클릭 한 다음 **IPv4 주소** 상자에 기본 가상 IP 주소를 입력 하 고 **확인**을 클릭 합니다.
    
   - **초기 데이터 동기화 선택** 페이지에서 전체를 선택 하 고, 복제본에 액세스할 수 있는 폴더를 지정 하 고, 두 복제본에서 사용 하는 SQL Server 서비스 계정에 쓰기 권한이 있는지를 입력 합니다. 그런 후 **다음**을 클릭 합니다.
    
     이 파일 공유는 데이터베이스를 초기화할 때 일시적으로 사용 됩니다. 대용량 데이터베이스를 처리 하는 경우 네트워크 대역폭이 데이터베이스 백업의 크기를 수용할 수 없는 경우를 포함 하 여 수동으로 초기화 하는 것이 좋습니다.
    
   - 유효성 검사 페이지에서 모든 유효성 검사가 성공 했는지 확인 하 고 **다음**을 클릭 합니다.
    
   - **요약** 페이지에서 모든 설정을 확인 하 고 마침을 클릭 합니다.
      
8. 풀 및 AG가 배포 된 후 몇 가지 마지막 단계를 수행 하 여 SQL 로그인이 AlwaysOn 가용성 그룹의 각 복제본에 있는지 확인 합니다. 
    
   - 토폴로지 작성기를 열고 **기존 배포에서 토폴로지 다운로드**를 선택한 다음 **확인**을 클릭 합니다.
    
   - 비즈니스용 Skype 서버를 확장 하 고, 토폴로지를 확장 하 고, **SQL Server 스토어**를 확장 합니다. 새 AlwaysOn 가용성 그룹의 SQL 저장소를 마우스 오른쪽 단추로 클릭 하 고 **속성 편집**을 클릭 합니다.
    
     - 페이지의 맨 아래에 있는 **SQL SERVER FQDN** 상자에서 값을 AG 수신기의 FQDN으로 변경 합니다.
    
   - 토폴로지를 게시 합니다. **작업** 메뉴에서 **토폴로지** , **게시**를 차례로 클릭 합니다. 확인 페이지에서 **다음**을 클릭 합니다. 그런 다음 새 토폴로지가 복제 될 때까지 몇 분 정도 기다립니다.
    
   - SQL Server Management Studio를 열고 AG로 이동 합니다. 보조 복제본으로 장애 조치를 수행 합니다.
    
   - 비즈니스용 Skype Server Management Shell을 열고 다음 cmdlet을 입력 하 여이 복제본에 대 한 SQL 로그인을 만듭니다.
    
   ```
   Install-CsDatabase -Update
   ```

   - 그룹의 각 복제본에 대해 앞의 두 단계 (그룹을 보조 복제본으로 장애 `Install-CsDatabase -Update`조치 하 고 사용)를 반복 합니다.
    
## <a name="deploy-an-always-on-availability-group-on-an-existing-pool-that-uses-database-mirroring"></a>데이터베이스 미러링을 사용 하는 기존 풀에 Always On 가용성 그룹 배포
<a name="BKMK_MirroredPool_CreateAlwaysOnGroup"> </a>

> [!NOTE]
> AG로 업그레이드 하는 풀이 조직의 중앙 관리 저장소를 호스트 하는 경우이 풀을 업그레이드 하기 전에 먼저 CMS를 다른 풀로 이동 해야 합니다. 이동-CsManagementServer cmdlet을 사용 하 여 풀을 이동 합니다. 조직에 다른 풀이 없는 경우 풀을 AG로 업그레이드 하기 전에 표준 버전 서버를 임시로 배포 하 고이 서버로 CMS를 이동할 수 있습니다. 
  
1. 비즈니스용 Skype Server Management Shell을 열고 다음 cmdlet을 입력 하 여 미러에서의 모든 데이터를 주 노드로 장애 조치 합니다.
    
   ```
   Invoke-CsDatabaseFailover -PoolFqdn <Pool FQDN> -DatabaseType <DatabaseType> -NewPrincipal "Primary"
   ```

    풀의 각 데이터베이스 유형에 대해이 cmdlet을 반복 합니다. 다음 cmdlet을 사용 하 여이 풀에 저장 된 데이터베이스 형식을 모두 찾을 수 있습니다.
     
   ```
   Get-CsPool -Identity <Pool FQDN>
   ```

2. 토폴로지 작성기를 사용 하 여 풀에서 데이터베이스 미러링을 제거 합니다.
    
   - 토폴로지 작성기를 엽니다. 토폴로지에서 **Enterprise Edition 프런트 엔드 풀**을 확장 하 고 풀의 이름을 마우스 오른쪽 단추로 클릭 한 다음 **속성 편집**을 클릭 합니다.
    
   - 풀의 각 SQL 저장소 유형에 대해 **Sql 저장소 미러링 사용** 확인란의 선택을 취소 합니다.
    
3. 변경 된 토폴로지를 게시 합니다. **작업** 메뉴에서 **토폴로지** , **게시**를 차례로 클릭 합니다. 확인 페이지에서 **다음** 을 클릭 합니다.
    
4. SQL Server Management Studio를 사용 하 여 미러를 중단 합니다.
    
   - SQL Server Management Studio를 열고 데이터베이스로 이동한 다음 **작업** 을 마우스 오른쪽 단추로 클릭 하 고 **미러**를 클릭 합니다. 그런 다음 **미러링 제거** 를 클릭 하 고 **확인**을 클릭 합니다.
    
   - AG로 변환 될 풀의 모든 데이터베이스에 대해이를 반복 합니다.
    
5. AG에 속하는 모든 데이터베이스 서버에 장애 조치 클러스터링 기능을 설정 합니다. 각 서버에서 다음을 수행 합니다.
    
   - 서버 관리자를 열고 **역할 및 기능 추가**를 클릭 합니다.
    
   - **기능 선택** 상자에 도달할 때까지 **다음** 을 클릭 합니다. **장애 조치 클러스터링** 확인란을 선택 합니다.
    
   - **장애 조치 클러스터링용으로 필요한 기능 추가** 상자에서 **기능 추가**를 클릭 합니다.
    
   - **설치**를 클릭 합니다.
    
6. 클러스터 구성의 유효성을 검사 합니다.
    
   - 서버 관리자에서 **도구** 메뉴를 클릭 한 다음 **장애 조치 클러스터 관리자**를 클릭 합니다.
    
   - 화면 오른쪽에 있는 **작업** 에서 **구성 유효성 검사**를 클릭 합니다.
    
   - **시작 하기 전에** 페이지에서 **다음**을 클릭 합니다.
    
   - 클러스터에 추가할 서버를 선택 하 고 **모든 테스트 실행**을 클릭 합니다.
    
   - **요약** 상자에서 마법사가 보고 하는 오류를 확인 합니다. 그런 다음 **마침을** 클릭 하 여 유효성 검사를 완료 합니다.
    
     특히 공유 저장소를 사용 하지 않는 경우 마법사에서 여러 가지 경고를 보고할 수 있습니다. 공유 저장소를 사용할 필요는 없습니다. 그러나 **오류** 메시지가 표시 되는 경우 계속 하기 전에 해당 문제를 해결 해야 합니다.
    
7. Windows Server 장애 조치 (Failover) 클러스터를 만듭니다.
    
   - **장애 조치 (Failover) 클러스터 관리** 마법사에서 **장애 조치 클러스터 관리**를 마우스 오른쪽 단추로 클릭 한 다음 **클러스터 만들기**를 클릭 합니다.
    
   - **시작 하기 전에** 페이지에서 **다음**을 클릭 합니다.
    
   - 클러스터 이름 및 IP 주소를 추가 합니다. 설정이 확인 되 면 **다음**을 클릭 합니다.
    
   - 확인 페이지에서 **다음**을 클릭 합니다.
    
   - 클러스터를 만든 후 **마침을**클릭 합니다.
    
8. 파일 공유 감시를 사용 하도록 클러스터 쿼럼 설정을 구성 하는 것이 좋습니다. 이렇게 하려면 다음 단계를 사용 합니다.
    
   - 클러스터 이름을 마우스 오른쪽 단추로 클릭 하 고 **기타 작업**을 클릭 한 다음 **클러스터 쿼럼 설정 구성을**클릭 합니다.
    
   - **쿼럼 구성 옵션 선택** 페이지에서 **쿼럼 감시 선택**을 클릭 합니다.
    
   - **쿼럼 감시 선택** 페이지에서 **파일 공유 감시 구성을**클릭 합니다.
    
   - **파일 공유 감시 구성** 페이지에서 사용할 파일 공유 경로를 입력 하 고 **다음**을 클릭 합니다.
    
   - **확인** 페이지에서 **다음**을 클릭 합니다.
    
9. 클러스터의 각 서버에서 SQL Server 구성 관리자의 AG 기능을 사용 하도록 설정 합니다.
    
   - SQL Server 구성 관리자를 엽니다. 화면 왼쪽의 트리에서 **Sql Server 서비스**를 클릭 한 다음 sql server 서비스를 두 번 클릭 합니다. 
    
   - **속성** 상자에서 **alwayson** 고가용성 탭을 선택 합니다. **alwayson 가용성 그룹 사용** 확인란을 선택 합니다. 메시지가 표시 되 면 SQL Server 서비스를 다시 시작 합니다.
    
10. 가용성 그룹을 만듭니다.
    
    - SQL Server Management Studio를 열고 SQL Server 인스턴스에 연결 합니다.
    
    - 개체 탐색기에서 **Always On 고가용성** 폴더를 확장 합니다. **가용성 그룹** 폴더를 마우스 오른쪽 단추로 클릭 하 고 **새 가용성 그룹 마법사**를 클릭 합니다.
    
    - **소개** 페이지가 나타나면 **다음**을 클릭 합니다.
    
    - **가용성 그룹 이름 지정** 페이지에서 가용성 그룹의 이름을 입력 하 고 **다음**을 클릭 합니다.
    
    - 데이터베이스 선택 페이지에서 AlwaysOn 가용성 그룹에 포함 하려는 데이터베이스를 선택 합니다. 그런 후 **다음**을 클릭 합니다.
    
    이 시나리오에서는 지원 되지 않으므로, AlwaysOn 가용성 그룹에 **ReportServer**, **reportservertempdb**또는 영구 채팅 데이터베이스를 포함 하지 마세요. 다른 모든 비즈니스용 Skype 서버 데이터베이스를 AlwaysOn 가용성 그룹에 포함할 수 있습니다.
    
    - **복제본 지정** 페이지에서 **복제본** 탭을 클릭 합니다. 그런 다음 **복제본 추가** 단추를 클릭 하 고 Windows Server 장애 조치 (Failover) 클러스터의 노드로 가입한 다른 SQL 인스턴스에 연결 합니다.
    
    - 각 인스턴스에 대해 **자동 장애 조치** 및 **동기 커밋** 옵션을 선택 합니다. **읽을 수 있는 보조** 옵션을 선택 하지 마세요.
    
    - **끝점** 탭을 클릭 하 고 **포트 번호가** 5022로 설정 되어 있는지 확인 합니다.
    
      - **수신기** 탭을 클릭 하 고 **가용성 그룹 수신기 만들기** 옵션을 선택 합니다. 이 옵션 아래에 수신기의 이름을 입력 하 고 **포트** 를 1433로 설정 합니다 (다른 포트는이 옵션에 지원 되지 않음).
    
    - **추가**를 클릭 한 다음 **IPv4 주소** 상자에 기본 가상 IP 주소를 입력 하 고 **확인**을 클릭 합니다.
    
    - **초기 데이터 동기화 선택** 페이지에서 전체를 선택 하 고, 복제본에 액세스할 수 있는 폴더를 지정 하 고, 두 복제본에서 사용 하는 SQL Server 서비스 계정에 쓰기 권한이 있는지를 입력 합니다. 그런 후 **다음**을 클릭 합니다.
    
    이 파일 공유는 데이터베이스를 초기화할 때 일시적으로 사용 됩니다. 대용량 데이터베이스를 처리 하는 경우 네트워크 대역폭이 데이터베이스 백업의 크기를 수용할 수 없는 경우를 포함 하 여 수동으로 초기화 하는 것이 좋습니다.
    
    - 유효성 검사 페이지에서 모든 유효성 검사가 성공 했는지 확인 하 고 **다음**을 클릭 합니다.
    
    - **요약** 페이지에서 모든 설정을 확인 하 고 마침을 클릭 합니다.
    
11. AG 수신기를 지정 하 고 AG의 기본 노드로 기존 미러의 사용자를 지정 하는 새 저장소를 만듭니다.
    
    - 토폴로지 작성기를 엽니다. 토폴로지에서 **공유 구성 요소**를 확장 하 고 **SQL server 저장소**를 마우스 오른쪽 단추로 클릭 한 다음 **새 sql server 스토어**를 클릭 합니다.
    
    - **새 SQL Store 정의** 페이지에서 먼저 고가용성 **설정** 확인란을 선택한 다음 드롭다운 상자에 SQL AlwaysOn 가용성 그룹이 표시 되는지 확인 합니다.
    
    - **SQL Server 사용 가능성 수신기 FQDN** 상자에 가용성 그룹을 만들 때 만든 수신기의 fqdn을 입력 합니다.
    
    - **SQL SERVER FQDN** 상자에 AG의 기본 노드에 대 한 fqdn을 입력 한 다음 **확인**을 클릭 합니다. 이 저장소에 대 한 이전 미러의 주 서버 여야 합니다.
    
12. 새 AG를 프런트 엔드 풀에 연결 합니다.
    
    - 토폴로지 작성기에서 AG와 연결할 풀을 마우스 오른쪽 단추로 클릭 하 고 **속성 편집**을 클릭 합니다.
    
    - **연결**의 **SQL Server 스토어** 상자에서 AG를 선택 합니다. 풀에서 AG로 이동 하려는 다른 데이터베이스에 대해 동일한 그룹을 선택 합니다.
    
    - 필요한 모든 데이터베이스가 AG로 설정 되어 있는 경우 **확인**을 클릭 합니다.
    
13. 토폴로지를 게시 합니다. **작업** 메뉴에서 **토폴로지** , **게시**를 차례로 클릭 합니다. 확인 페이지에서 **다음**을 클릭 합니다.
    
14. 마지막 단계를 수행 하 여 SQL 로그인이 AlwaysOn 가용성 그룹의 각 복제본에 있는지 확인 합니다.
    
    - 토폴로지 작성기를 열고 **기존 배포에서 토폴로지 다운로드**를 선택한 다음 **확인**을 클릭 합니다.
    
    - 비즈니스용 Skype 서버를 확장 하 고, 토폴로지를 확장 하 고, **SQL Server 스토어**를 확장 합니다. 새 AG의 SQL 저장소를 마우스 오른쪽 단추로 클릭 하 고 **속성 편집**을 클릭 합니다.
    
    - 페이지의 맨 아래에 있는 **SQL SERVER FQDN** 상자에서 값을 AG 수신기의 FQDN으로 변경 합니다.
    
    - 토폴로지를 게시 합니다. **작업** 메뉴에서 **토폴로지** , **게시**를 차례로 클릭 합니다. 확인 페이지에서 **다음**을 클릭 합니다. 그런 다음 새 토폴로지가 복제 될 때까지 몇 분 정도 기다립니다.
    
    - SQL Server Management Studio를 열고 AG로 이동 합니다. 보조 복제본으로 장애 조치를 수행 합니다.
    
    - 비즈니스용 Skype Server Management Shell을 열고 다음 cmdlet을 입력 하 여이 복제본에 대 한 SQL 로그인을 만듭니다.
    
    ```
    Install-CsDatabase -Update
    ```

    - 그룹의 각 복제본에 대해 앞의 두 단계 (그룹을 보조 복제본으로 장애 `Install-CsDatabase -Update`조치 하 고 사용)를 반복 합니다.
    
## <a name="deploy-an-always-on-availability-group-on-an-existing-pool-that-does-not-use-database-mirroring"></a>데이터베이스 미러링을 사용 하지 않는 기존 풀에 Always On 가용성 그룹 배포
<a name="BKMK_NoHAPool_CreateAlwaysOnGroup"> </a>

> [!NOTE]
> AG로 업그레이드 하는 풀이 조직의 중앙 관리 저장소를 호스트 하는 경우이 풀을 업그레이드 하기 전에 먼저 CMS를 다른 풀로 이동 해야 합니다. 이동-CsManagementServer cmdlet을 사용 하 여 풀을 이동 합니다. 조직에 다른 풀이 없는 경우 풀을 AG로 업그레이드 하기 전에 표준 버전 서버를 임시로 배포 하 고이 서버로 CMS를 이동할 수 있습니다. 
  
1. AG에 속하는 모든 데이터베이스 서버에 장애 조치 클러스터링 기능을 설정 합니다. 각 서버에서 다음을 수행 합니다.
    
   - 서버 관리자를 열고 **역할 및 기능 추가**를 클릭 합니다.
    
   - **기능 선택** 상자에 도달할 때까지 **다음** 을 클릭 합니다. **장애 조치 클러스터링** 확인란을 선택 합니다.
    
   - **장애 조치 클러스터링용으로 필요한 기능 추가** 상자에서 **기능 추가**를 클릭 합니다.
    
   - **설치**를 클릭 합니다.
    
2. 클러스터 구성의 유효성을 검사 합니다.
    
   - 서버 관리자에서 **도구** 메뉴를 클릭 한 다음 **장애 조치 클러스터 관리자**를 클릭 합니다.
    
   - 화면 오른쪽에 있는 **작업** 에서 **구성 유효성 검사**를 클릭 합니다.
    
   - **시작 하기 전에** 페이지에서 **다음**을 클릭 합니다.
    
   - 클러스터에 추가할 서버를 선택 하 고 **모든 테스트 실행**을 클릭 합니다.
    
   - **요약** 상자에서 마법사가 보고 하는 오류를 확인 합니다. 그런 다음 **마침을** 클릭 하 여 유효성 검사를 완료 합니다.
    
     특히 공유 저장소를 사용 하지 않는 경우 마법사에서 여러 가지 경고를 보고할 수 있습니다. 공유 저장소를 사용할 필요는 없습니다. 그러나 **오류** 메시지가 표시 되는 경우 계속 하기 전에 해당 문제를 해결 해야 합니다.
    
3. WSFC (Windows Server 장애 조치 (Failover) 클러스터)를 만듭니다.
    
   - **장애 조치 (Failover) 클러스터 관리** 마법사에서 **장애 조치 클러스터 관리**를 마우스 오른쪽 단추로 클릭 한 다음 **클러스터 만들기**를 클릭 합니다.
    
   - **시작 하기 전에** 페이지에서 **다음**을 클릭 합니다.
    
   - 클러스터 이름 및 IP 주소를 추가 합니다. 설정이 확인 되 면 **다음**을 클릭 합니다.
    
   - 확인 페이지에서 **다음**을 클릭 합니다.
    
   - 클러스터를 만든 후 **마침을**클릭 합니다.
    
4. 파일 공유 감시를 사용 하도록 클러스터 쿼럼 설정을 구성 하는 것이 좋습니다. 이렇게 하려면 다음 단계를 사용 합니다.
    
   - 클러스터 이름을 마우스 오른쪽 단추로 클릭 하 고 **기타 작업**을 클릭 한 다음 **클러스터 쿼럼 설정 구성을**클릭 합니다.
    
   - **쿼럼 구성 옵션 선택** 페이지에서 **쿼럼 감시 선택**을 클릭 합니다.
    
   - **쿼럼 감시 선택** 페이지에서 **파일 공유 감시 구성을**클릭 합니다.
    
   - **파일 공유 감시 구성** 페이지에서 사용할 파일 공유 경로를 입력 하 고 **다음**을 클릭 합니다.
    
   - **확인** 페이지에서 **다음**을 클릭 합니다.
    
5. 클러스터의 각 서버에서 SQL Server 구성 관리자의 AG를 사용 하도록 설정 합니다.
    
   - SQL Server 구성 관리자를 엽니다. 화면 왼쪽의 트리에서 **Sql Server 서비스**를 클릭 한 다음 sql server 서비스를 두 번 클릭 합니다. 
    
   - **속성** 상자에서 **alwayson** 고가용성 탭을 선택 합니다. **alwayson 가용성 그룹 사용** 확인란을 선택 합니다. 메시지가 표시 되 면 SQL Server 서비스를 다시 시작 합니다.
    
6. 가용성 그룹을 만듭니다.
    
   - SQL Server Management Studio를 열고 SQL Server 인스턴스에 연결 합니다.
    
   - 개체 탐색기에서 **Always On 고가용성** 폴더를 확장 합니다. **가용성 그룹** 폴더를 마우스 오른쪽 단추로 클릭 하 고 **새 가용성 그룹 마법사**를 클릭 합니다.
    
   - **소개** 페이지가 나타나면 **다음**을 클릭 합니다.
    
   - **가용성 그룹 이름 지정** 페이지에서 가용성 그룹의 이름을 입력 하 고 **다음**을 클릭 합니다.
    
   - 데이터베이스 선택 페이지에서 AG에 포함 하려는 데이터베이스를 선택 합니다. 그런 후 **다음**을 클릭 합니다.
    
     이 시나리오에서는 지원 되지 않으므로 **ReportServer**, **Reportservertempdb**또는 영구 채팅 데이터베이스를 AG에 포함 하지 마세요. AG에 다른 모든 비즈니스용 Skype 서버 데이터베이스를 포함할 수 있습니다.
    
   - **복제본 지정** 페이지에서 **복제본** 탭을 클릭 합니다. 그런 다음 **복제본 추가** 단추를 클릭 하 고 WSFC의 노드로 가입한 다른 SQL 인스턴스에 연결 합니다.
    
   - 각 인스턴스에 대해 **자동 장애 조치** 및 **동기 커밋** 옵션을 선택 합니다. **읽을 수 있는 보조** 옵션을 선택 하지 마세요.
    
   - **끝점** 탭을 클릭 하 고 **포트 번호가** 5022로 설정 되어 있는지 확인 합니다.
    
   - **수신기** 탭을 클릭 하 고 **가용성 그룹 수신기 만들기** 옵션을 선택 합니다. 이 옵션 아래에 수신기의 이름을 입력 하 고 **포트** 를 1433로 설정 합니다 (다른 포트는이 옵션에 지원 되지 않음).
    
   - **추가**를 클릭 한 다음 **IPv4 주소** 상자에 기본 가상 IP 주소를 입력 하 고 **확인**을 클릭 합니다.
    
   - **초기 데이터 동기화 선택** 페이지에서 전체를 선택 하 고, 복제본에 액세스할 수 있는 폴더를 지정 하 고, 두 복제본에서 사용 하는 SQL Server 서비스 계정에 쓰기 권한이 있는지를 입력 합니다. 그런 후 **다음**을 클릭 합니다.
    
     이 파일 공유는 데이터베이스를 초기화할 때 일시적으로 사용 됩니다. 대용량 데이터베이스를 처리 하는 경우 네트워크 대역폭이 데이터베이스 백업의 크기를 수용할 수 없는 경우를 포함 하 여 수동으로 초기화 하는 것이 좋습니다.
    
     - 유효성 검사 페이지에서 모든 유효성 검사가 성공 했는지 확인 하 고 **다음**을 클릭 합니다.
    
   - **요약** 페이지에서 모든 설정을 확인 하 고 마침을 클릭 합니다.
    
7. AG 수신기를 지정 하는 새 저장소를 만듭니다.
    
   - 토폴로지 작성기를 엽니다. 토폴로지에서 **공유 구성 요소**를 확장 하 고 **SQL server 저장소**를 마우스 오른쪽 단추로 클릭 한 다음 **새 sql server 스토어**를 클릭 합니다.
    
   - **새 SQL Store 정의** 페이지에서 먼저 고가용성 **설정** 확인란을 선택한 다음 드롭다운 상자에 SQL AlwaysOn 가용성 그룹이 표시 되는지 확인 합니다.
    
   - **SQL Server 사용 가능성 수신기 FQDN** 상자에 가용성 그룹을 만들 때 만든 수신기의 fqdn을 입력 합니다.
    
   - **SQL SERVER FQDN** 상자에 AG의 기본 노드에 대 한 fqdn을 입력 한 다음 **확인**을 클릭 합니다.
    
8. 새 Always On 가용성 그룹과 프런트 엔드 풀을 연결 합니다.
    
   - 토폴로지 작성기에서 AG와 연결할 풀을 마우스 오른쪽 단추로 클릭 하 고 **속성 편집**을 클릭 합니다.
    
   - **연결**의 **SQL Server 스토어** 상자에서 AG를 선택 합니다. 풀에서 AG로 이동 하려는 다른 데이터베이스에 대해 동일한 그룹을 선택 합니다.
    
   - 필요한 모든 데이터베이스가 AG로 설정 되어 있는 경우 **확인**을 클릭 합니다.
    
9. 토폴로지를 게시 합니다. **작업** 메뉴에서 **토폴로지** , **게시**를 차례로 클릭 합니다. 확인 페이지에서 **다음**을 클릭 합니다.
    
10. 마지막 단계를 수행 하 여 SQL 로그인이 AG의 각 복제본에 있는지 확인 합니다.
    
    - 토폴로지 작성기를 열고 **기존 배포에서 토폴로지 다운로드**를 선택한 다음 **확인**을 클릭 합니다.
    
    - 비즈니스용 Skype 서버를 확장 하 고, 토폴로지를 확장 하 고, **SQL Server 스토어**를 확장 합니다. 새 AG의 SQL 저장소를 마우스 오른쪽 단추로 클릭 하 고 **속성 편집**을 클릭 합니다.
    
    - 페이지의 맨 아래에 있는 **SQL SERVER FQDN** 상자에서 값을 AG 수신기의 FQDN으로 변경 합니다.
    
    - 토폴로지를 게시 합니다. **작업** 메뉴에서 **토폴로지** , **게시**를 차례로 클릭 합니다. 확인 페이지에서 **다음**을 클릭 합니다. 그런 다음 새 토폴로지가 복제 될 때까지 몇 분 정도 기다립니다.
    
    - SQL Server Management Studio를 열고 AG로 이동 합니다. 보조 복제본으로 장애 조치를 수행 합니다.
    
    - 비즈니스용 Skype Server Management Shell을 열고 다음 cmdlet을 입력 하 여이 복제본에 대 한 SQL 로그인을 만듭니다.
    
      ```
      Install-CsDatabase -Update
      ```

      - 그룹의 각 복제본에 대해 앞의 두 단계 (그룹을 보조 복제본으로 장애 `Install-CsDatabase -Update`조치 하 고 사용)를 반복 합니다.
