---
title: 비즈니스용 Skype Server using-CsCertificate에 대 한 AV 및 OAuth 인증서 스테이지 설정-롤백
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 22dec3cc-4b6b-4df2-b269-5b35df4731a7
description: '요약: 비즈니스용 Skype 서버용으로 AV 및 OAuth 인증서를 준비 합니다.'
ms.openlocfilehash: 530e8f603d2c5be368df37354c3974e2b5abeb5a
ms.sourcegitcommit: e64c50818cac37f3d6f0f96d0d4ff0f4bba24aef
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/06/2020
ms.locfileid: "41818730"
---
# <a name="stage-av-and-oauth-certificates-in-skype-for-business-server-using--roll-in-set-cscertificate"></a><span data-ttu-id="38a0d-103">비즈니스용 Skype Server using-CsCertificate에 대 한 AV 및 OAuth 인증서 스테이지 설정-롤백</span><span class="sxs-lookup"><span data-stu-id="38a0d-103">Stage AV and OAuth certificates in Skype for Business Server using -Roll in Set-CsCertificate</span></span>
 
<span data-ttu-id="38a0d-104">**요약:** 비즈니스용 Skype 서버용으로 AV 및 OAuth 인증서를 준비 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-104">**Summary:** Stage AV and OAuth certificates for Skype for Business Server.</span></span>
  
<span data-ttu-id="38a0d-105">오디오/비디오 (A/V) 통신은 비즈니스용 Skype 서버의 주요 구성 요소입니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-105">Audio/Video (A/V) communications is a key component of Skype for Business Server.</span></span> <span data-ttu-id="38a0d-106">응용 프로그램 공유 및 오디오, 비디오 회의 등의 기능은 A/V Edge 서비스에 할당 된 인증서, 특히 A/V 인증 서비스에 의존 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-106">Features such as application sharing and audio and video conferencing rely on the certificates assigned to the A/V Edge service, specifically the A/V Authentication service.</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="38a0d-107">이 새로운 기능은 A/V Edge 서비스와 OAuthTokenIssuer 인증서에 사용할 수 있도록 설계 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-107">This new feature is designed to work for the A/V Edge service and the OAuthTokenIssuer certificate.</span></span> <span data-ttu-id="38a0d-108">다른 인증서 유형은 A/V Edge 서비스 및 OAuth 인증서 유형과 함께 프로 비전 할 수 있지만, A/V Edge 서비스 인증서가 제공 하는 공존 동작에는 도움이 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-108">Other certificate types can be provisioned along with the A/V Edge service and OAuth certificate type, but will not benefit from the coexistence behavior that the A/V Edge service certificate will.</span></span>
  
<span data-ttu-id="38a0d-109">비즈니스용 Skype 서버 인증서를 관리 하는 데 사용 되는 비즈니스용 Skype 서버 관리 셸 PowerShell cmdlet은 A/V Edge 서비스 인증서를 오디오 Videoauthentication 인증서 유형으로, OAuthServer 인증서를 typeOAuthTokenIssuer로 지칭 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-109">The Skype for Business Server Management Shell PowerShell cmdlets used to manage Skype for Business Server certificates refers to the A/V Edge service certificate as the AudioVideoAuthentication certificate type and the OAuthServer certificate as typeOAuthTokenIssuer.</span></span> <span data-ttu-id="38a0d-110">이 항목의 나머지 부분에서 인증서를 고유 하 게 식별 하기 위해 동일한 식별자 형식, 오디오 Videoauthentication andOAuthTokenIssuer를 참조 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-110">For the rest of this topic and to uniquely identify the certificates, they will be referred to by the same identifier type, AudioVideoAuthentication andOAuthTokenIssuer.</span></span>
  
<span data-ttu-id="38a0d-111">A/V 인증 서비스는 클라이언트 및 다른 A/V 소비자가 사용 하는 토큰 발급을 담당 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-111">The A/V Authentication service is responsible for issuing tokens that are used by clients and other A/V consumers.</span></span> <span data-ttu-id="38a0d-112">토큰이 인증서의 특성 으로부터 생성 되 고, 인증서가 만료 되 면 새 인증서에서 생성 된 새 토큰으로 다시 참가 하는 데 필요한 연결 및 요구 사항이 손실 됩니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-112">The tokens are generated from attributes on the certificate, and when the certificate expires, loss of connection and requirement to rejoin with a new token generated by the new certificate will result.</span></span> <span data-ttu-id="38a0d-113">비즈니스용 Skype Server의 새로운 기능은이 문제를 해결 하는 것으로, 오래 된 인증서가 만료 되는 것을 미리 하 고, 두 인증서가 일정 기간 동안 계속 해 서 작동할 수 있도록 하는 기능입니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-113">A new feature in Skype for Business Server will alleviate this problem - the ability to stage a new certificate in advance of the old one expiring and allowing both certificates to continue to function for a period of time.</span></span> <span data-ttu-id="38a0d-114">이 기능은 CsCertificate Skype for Business Server Management Shell cmdlet에서 업데이트 된 기능을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-114">This feature uses updated functionality in the Set-CsCertificate Skype for Business Server Management Shell cmdlet.</span></span> <span data-ttu-id="38a0d-115">기존 매개 변수-EffectiveDate를 사용 하는 새 매개 변수-롤은 새 오디오 Videoauthentication 인증서를 인증서 저장소에 배치 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-115">The new parameter -Roll, with the existing parameter -EffectiveDate, will place the new AudioVideoAuthentication certificate in the certificate store.</span></span> <span data-ttu-id="38a0d-116">이전 오디오 Videoauthentication 인증서는 계속 해 서 발급 된 토큰의 유효성 검사를 위해 유지 됩니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-116">The older AudioVideoAuthentication certificate will still remain for issued tokens to be validated against.</span></span> <span data-ttu-id="38a0d-117">새 오디오 Videoauthentication 인증서를 현재 위치에 배치 하는 것부터 다음 일련의 이벤트가 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-117">Beginning with putting the new AudioVideoAuthentication certificate in place, the following series of events will occur:</span></span>
  
> [!TIP]
> <span data-ttu-id="38a0d-118">Skype for Business Server 관리 셸 cmdlet을 사용 하 여 인증서를 관리 하는 경우에는 Edge 서버의 각 용도에 대해 별도의 인증서를 요청할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-118">Using the Skype for Business Server Management Shell cmdlets for managing certificates, you can request separate and distinct certificates for each purpose on the Edge Server.</span></span> <span data-ttu-id="38a0d-119">비즈니스용 Skype 서버 배포 마법사에서 인증서 마법사를 사용 하면 인증서를 만드는 데 도움이 되지만, 일반적으로 모든 인증서가 Edge 서버에서 단일 인증서로 사용 하는 couples **기본** 유형이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-119">Using the Certificate Wizard in the Skype for Business Server Deployment Wizard assists you in creating certificates, but is typically of the **default** type which couples all certificate uses for the Edge Server onto a single certificate.</span></span> <span data-ttu-id="38a0d-120">롤링 인증서 기능을 사용 하는 경우에는 다른 인증서 용도에서 오디오 Videoauthentication 인증서를 분리할 때 권장 되는 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-120">The recommended practice if you are going to use the rolling certificate feature is to decouple the AudioVideoAuthentication certificate from the other certificate purposes.</span></span> <span data-ttu-id="38a0d-121">기본 형식의 인증서를 프로 비전 하 고 준비할 수 있지만, 결합 된 인증서의 오디오 Videoauthentication 부분만 스테이징에서 혜택을 받습니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-121">You can provision and stage a certificate of the Default type, but only the AudioVideoAuthentication portion of the combined certificate will benefit from the staging.</span></span> <span data-ttu-id="38a0d-122">인증서가 만료 되 면 인스턴트 메시지 대화와 관련 된 사용자 (예:)가 로그 아웃 하 고 다시 로그인 해야 액세스에 지 서비스와 연결 된 새 인증서를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-122">A user involved in (for example) an instant messaging conversation when the certificate expires will need to log out and log back in to make use of the new certificate associated with the Access Edge service.</span></span> <span data-ttu-id="38a0d-123">웹 회의에 참여 하는 사용자에 대 한 유사한 동작이 웹 회의에 지 서비스를 사용 하는 경우 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-123">Similar behavior will occur for a user involved in a Web conference using the Web Conferencing Edge service.</span></span> <span data-ttu-id="38a0d-124">OAuthTokenIssuer 인증서는 모든 서버에서 공유 되는 특정 유형입니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-124">The OAuthTokenIssuer certificate is a specific type that is shared across all servers.</span></span> <span data-ttu-id="38a0d-125">한 곳에서 인증서를 만들고 관리 하며, 인증서는 중앙 관리 저장소에 다른 모든 서버에 대해 저장 됩니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-125">You create and manage the certificate in one place and the certificate is stored in the Central Management store for all other servers.</span></span>
  
<span data-ttu-id="38a0d-126">CsCertificate cmdlet을 사용 하 고 현재 인증서가 만료 되기 전에 인증서를 준비 하는 데 사용 하는 경우 옵션 및 요구 사항을 완전히 이해 하려면 추가 세부 정보가 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-126">Additional detail is needed to fully understand your options and requirements when using the Set-CsCertificate cmdlet and using it to stage certificates prior to the current certificate expiring.</span></span> <span data-ttu-id="38a0d-127">-롤 매개 변수는 중요 하지만 단일 용도로만 가능 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-127">The -Roll parameter is important, but essentially single purpose.</span></span> <span data-ttu-id="38a0d-128">이를 매개 변수로 정의 하는 경우-CsCertificate에 따라 영향을 받을 인증서에 대 한 정보를 제공 하는 것입니다 (예:, 인증서가 표시 되는 경우). EffectiveDate에서 효율적으로 정의 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-128">If you define it as a parameter, you are telling Set-CsCertificate that you will be providing information about the certificate that will be affected defined by -Type (for example AudioVideoAuthentication and OAuthTokenIssuer), when the certificate will become effective defined by -EffectiveDate.</span></span>
  
 <span data-ttu-id="38a0d-129">**-롤**:-롤 매개 변수는 필수 이며 종속성이 함께 제공 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-129">**-Roll**: The -Roll parameter is required and has dependencies that must be supplied along with it.</span></span> <span data-ttu-id="38a0d-130">영향을 받을 인증서와 적용 방법을 완전히 정의 하는 데 필요한 매개 변수:</span><span class="sxs-lookup"><span data-stu-id="38a0d-130">Required parameters to fully define which certificates will be affected and how they will be applied:</span></span>
  
 <span data-ttu-id="38a0d-131">**-EffectiveDate**: EffectiveDate 매개 변수는 새 인증서가 현재 인증서와 공동 활성 상태가 되는 시간을 정의 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-131">**-EffectiveDate**: The parameter -EffectiveDate defines when the new certificate will become co-active with the current certificate.</span></span> <span data-ttu-id="38a0d-132">-EffectiveDate 현재 인증서의 만료 시간에 가까운 시간 이거나 시간이 길어질 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-132">The -EffectiveDate can be close to the expiry time of the current certificate, or it can be a longer period of time.</span></span> <span data-ttu-id="38a0d-133">오디오 Videoauthentication 인증서에 대 한 권장 최소 EffectiveDate 8 시간이 며,이는 오디오 Videoauthentication 인증서를 사용 하 여 발급 된 AV Edge 서비스 토큰의 기본 토큰 수명입니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-133">A recommended minimum -EffectiveDate for the AudioVideoAuthentication certificate would be 8 hours, which is the default token lifetime for AV Edge service tokens issued using the AudioVideoAuthentication certificate.</span></span>
  
<span data-ttu-id="38a0d-134">OAuthTokenIssuer 인증서를 준비할 때 선행 시간에 대 한 요구 사항이 서로 다르므로 인증서가 유효 하 게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-134">When staging OAuthTokenIssuer certificates, there are different requirements for the lead time before the certificate can become effective.</span></span> <span data-ttu-id="38a0d-135">OAuthTokenIssuer 인증서가 선행 시간에 있어야 하는 최소 시간은 현재 인증서의 만료 시간 보다 24 시간입니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-135">The minimum time that the OAuthTokenIssuer certificate should have for its lead time is 24 hours before the expiration time of the current certificate.</span></span> <span data-ttu-id="38a0d-136">함께 사용할 경우 인증서 생성 인증 및 암호화 키에 대 한 보존 시간이 오래 걸리는 OAuthTokenIssuer 인증서 (예: Exchange Server)에 종속 된 다른 서버 역할 때문에 겹치는 시간을 연장 합니다. 내용이.</span><span class="sxs-lookup"><span data-stu-id="38a0d-136">The extended lead time for the coexistence is because of other server roles that are dependent on the OAuthTokenIssuer certificate (Exchange Server, for example) which has a longer retention time for certificate created authentication and encryption key materials.</span></span>
  
 <span data-ttu-id="38a0d-137">**-지문**: 손도장은 해당 인증서에 고유한 인증서의 특성입니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-137">**-Thumbprint**: The thumbprint is an attribute on the certificate that is unique to that certificate.</span></span> <span data-ttu-id="38a0d-138">-Thumbprint 매개 변수는 CsCertificate cmdlet의 동작에 영향을 받을 인증서를 식별 하는 데 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-138">The -Thumbprint parameter is used to identify the certificate that will be affected by the actions of the Set-CsCertificate cmdlet.</span></span>
  
 <span data-ttu-id="38a0d-139">**-Type**:-type 매개 변수는 단일 인증서 사용 유형을 허용 하거나 쉼표로 구분 된 인증서 용도 유형을 나열할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-139">**-Type**: The -Type parameter can accept a single certificate usage type or a comma separated list of certificate usage types.</span></span> <span data-ttu-id="38a0d-140">인증서 종류는 cmdlet을 식별 하는 파일과 서버에서 인증서의 용도입니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-140">The certificate types are those that identify to the cmdlet and to the server what the purpose of the certificate is.</span></span> <span data-ttu-id="38a0d-141">예를 들어, A/V Edge 서비스와 AV 인증 서비스에서 사용 하는 e Videoauthentication을 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-141">For example, type AudioVideoAuthentication is for use by the A/V Edge service and the AV Authentication service.</span></span> <span data-ttu-id="38a0d-142">다른 유형의 인증서를 준비 하 고 동시에 제공 하기로 결정 한 경우, 인증서에 대해 가장 오래 걸리는 최소 유효 리드 시간을 고려해 야 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-142">If you decide to stage and provision certificates of a different type at the same time, you must consider the longest required minimum effective lead time for the certificates.</span></span> <span data-ttu-id="38a0d-143">예를 들어, 오디오 Videoauthentication 및 OAuthTokenIssuer 유형의 인증서를 준비 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-143">For example, you need to stage certificates of type AudioVideoAuthentication and OAuthTokenIssuer.</span></span> <span data-ttu-id="38a0d-144">최소 EffectiveDate는 두 인증서 중 큰 것 이어야 하며,이 경우에는 최소 소요 시간이 24 시간인 OAuthTokenIssuer입니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-144">Your minimum -EffectiveDate must be the greater of the two certificates, in this case the OAuthTokenIssuer, which has a minimum lead time of 24 hours.</span></span> <span data-ttu-id="38a0d-145">리드 시간을 24 시간으로 하는 오디오 Videoauthentication 인증서를 준비 하지 않으려면 요구 사항에 더 많은 EffectiveDate을 별도로 처리 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-145">If you do not want to stage the AudioVideoAuthentication certificate with a lead time of 24 hours, stage it separately with an EffectiveDate that is more to your requirements.</span></span>
  
### <a name="to-update-or-renew-an-av-edge-service-certificate-with-a--roll-and--effectivedate-parameters"></a><span data-ttu-id="38a0d-146">-롤 및-EffectiveDate 매개 변수를 사용 하 여 A/V Edge 서비스 인증서를 업데이트 하거나 갱신 하려면</span><span class="sxs-lookup"><span data-stu-id="38a0d-146">To update or renew an A/V Edge service certificate with a -Roll and -EffectiveDate parameters</span></span>

1. <span data-ttu-id="38a0d-147">로컬 컴퓨터에 관리자 그룹의 구성원으로 로그온 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-147">Log on to the local computer as a member of the Administrators group.</span></span>
    
2. <span data-ttu-id="38a0d-148">A/V Edge 서비스의 기존 인증서에 대 한 내보낼 수 있는 개인 키를 사용 하 여 갱신 또는 새 오디오 Videoauthentication 인증서를 요청 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-148">Request a renewal or new AudioVideoAuthentication certificate with exportable private key for the existing certificate on the A/V Edge service.</span></span>
    
3. <span data-ttu-id="38a0d-149">새 오디오 Videoauthentication 인증서를 Edge 서버 및 풀의 다른 모든 Edge 서버로 가져옵니다 (풀을 배포한 경우).</span><span class="sxs-lookup"><span data-stu-id="38a0d-149">Import the new AudioVideoAuthentication certificate to the Edge Server and all other Edge Server in your pool (if you have a pool deployed).</span></span>
    
4. <span data-ttu-id="38a0d-150">Set-CsCertificate cmdlet을 사용 하 여 가져온 인증서를 구성 하 고-Roll 매개 변수를-EffectiveDate 매개 변수와 함께 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-150">Configure the imported certificate with the Set-CsCertificate cmdlet and use the -Roll parameter with the -EffectiveDate parameter.</span></span> <span data-ttu-id="38a0d-151">유효 날짜는 현재 인증서 만료 시간 (14:00:00 또는 2:00:00 PM)에서 토큰 수명 (기본적으로 8 시간)을 뺀 값으로 정의 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-151">The effective date should be defined as the current certificate expire time (14:00:00, or 2:00:00 PM) minus token lifetime (by default eight hours).</span></span> <span data-ttu-id="38a0d-152">이렇게 하면 인증서를 활성으로 설정 해야 하 고-EffectiveDate \<문자열\>: "7/22/2015 6:00:00 AM"이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-152">This gives us a time that the certificate must be set to active, and is the -EffectiveDate \<string\>: "7/22/2015 6:00:00 AM".</span></span> 
    
    > [!IMPORTANT]
    > <span data-ttu-id="38a0d-153">Edge 풀의 경우, 새 인증서를 사용 하 여 모든 클라이언트 및 소비자 토큰이 갱신 되기 전에 오래 된 인증서가 만료 되는 것을 방지 하기 위해 배포 되는 첫 번째 인증서의-EffectiveDate 매개 변수를 통해 배포 및 프로 비전 된 모든 오디오 Videoauthentication 인증서가 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-153">For an Edge pool, you must have all AudioVideoAuthentication certificates deployed and provisioned by the date and time defined by the -EffectiveDate parameter of the first certificate deployed to avoid possible A/V communications disruption due to the older certificate expiring before all client and consumer tokens have been renewed using the new certificate.</span></span> 
  
    <span data-ttu-id="38a0d-154">CsCertificate 명령은-롤 및-EffectiveTime 매개 변수를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-154">The Set-CsCertificate command with the -Roll and -EffectiveTime parameter:</span></span>
    
   ```PowerShell
   Set-CsCertificate -Type AudioVideoAuthentication -Thumbprint
          <thumb print of new certificate> -Roll -EffectiveDate <date and time
          for certificate to become active>
   ```

    <span data-ttu-id="38a0d-155">CsCertificate 명령 예:</span><span class="sxs-lookup"><span data-stu-id="38a0d-155">An example Set-CsCertificate command:</span></span>
    
   ```PowerShell
   Set-CsCertificate -Type AudioVideoAuthentication -Thumbprint
          "B142918E463981A76503828BB1278391B716280987B" -Roll -EffectiveDate "7/22/2015
          6:00:00 AM"
   ```

    > [!IMPORTANT]
    > <span data-ttu-id="38a0d-156">EffectiveDate는 서버의 국가 및 언어 설정에 맞게 형식이 지정 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-156">The EffectiveDate must be formatted to match your server's region and language settings.</span></span> <span data-ttu-id="38a0d-157">이 예제에서는 미국 영어 국가 및 언어 설정을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-157">The example uses the US English Region and Language settings</span></span> 
  
<span data-ttu-id="38a0d-158">CsCertificate,-롤 및-EffectiveDate에서 사용 중인 추가 기능을 확인 하기 위해 기존 인증서를 사용 하는 동안 새 오디오 Videoauthentication 토큰을 발급 하는 데 사용 되는 새 인증서를 준비 하는 프로세스에 대해 자세히 알아보려면 소비자에 따라 시각적 시간 표시 막대는 프로세스를 이해 하는 효과적인 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-158">To further understand the process that Set-CsCertificate, -Roll, and -EffectiveDate use to stage a new certificate for issuing new AudioVideoAuthentication tokens while still using an existing certificate to validate AudioVideoAuthentication that are in use by consumers, a visual timeline is an effective means of understanding the process.</span></span> <span data-ttu-id="38a0d-159">다음 예제에서 관리자는 A/V Edge 서비스 인증서가 07/22/2015에서 2:00:00 PM에 만료 되는 것으로 판단 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-159">In the following example, the administrator determines that the A/V Edge service certificate is due to expire at 2:00:00 PM on 07/22/2015.</span></span> <span data-ttu-id="38a0d-160">새 인증서를 요청 하 고 해당 풀의 각 Edge 서버로 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-160">He requests and receives a new certificate and imports it to each Edge Server in his pool.</span></span> <span data-ttu-id="38a0d-161">2 07/22/2015 AM에는 CsCertificate with-롤,-지문을 새 인증서의 손도장 문자열과 동일 하 게,-EffectiveTime를 07/22/2015 6:00:00 AM으로 설정 하는 작업이 시작 됩니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-161">At 2 AM on 07/22/2015, he begins running Get-CsCertificate with -Roll, -Thumbprint equal to the thumbprint string of the new certificate, and -EffectiveTime set to 07/22/2015 6:00:00 AM.</span></span> <span data-ttu-id="38a0d-162">각 Edge 서버에서이 명령을 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-162">He runs this command on each Edge Server.</span></span>
  
![Roll 및 EffectiveDate 매개 변수 사용.](../../media/Ops_Certificate_Set_Roll_EffectiveTime_Timeline.jpg)
  
|<span data-ttu-id="38a0d-164">**호출**</span><span class="sxs-lookup"><span data-stu-id="38a0d-164">**Callout**</span></span>|<span data-ttu-id="38a0d-165">**단계별**</span><span class="sxs-lookup"><span data-stu-id="38a0d-165">**Stage**</span></span>|
|:-----|:-----|
|<span data-ttu-id="38a0d-166">1</span><span class="sxs-lookup"><span data-stu-id="38a0d-166">1</span></span>  <br/> |<span data-ttu-id="38a0d-167">시작: 7/22/2015 12:00:00 오전</span><span class="sxs-lookup"><span data-stu-id="38a0d-167">Start: 7/22/2015 12:00:00 AM</span></span>  <br/> <span data-ttu-id="38a0d-168">현재 오디오 Videoauthentication 인증서는 7/22/2015의 2:00:00 PM에 만료 되기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-168">The current AudioVideoAuthentication certificate is due to expire at 2:00:00 PM on 7/22/2015.</span></span> <span data-ttu-id="38a0d-169">이는 인증서의 만료 된 타임 스탬프에 따라 결정 됩니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-169">This is determined by the expires time stamp on the certificate.</span></span> <span data-ttu-id="38a0d-170">기존 인증서가 만료 시간에 도달 하기 전에 8 시간의 겹치기 (기본 토큰 수명)을 고려 하 여 인증서를 대체 하 고 롤오버를 계획 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-170">Plan your certificate replacement and rollover to account for an 8 hour overlap (default token lifetime) before the existing certificate reaches the expire time.</span></span> <span data-ttu-id="38a0d-171">이 예제에서는 관리자가 6:00:00 AM 유효 시간 이전에 새 인증서를 배치 하 고 프로 비전 하는 데 적절 한 시간을 허용 하기 위해 2:00:00 AM 시간을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-171">The 2:00:00 AM lead time is used in this example to allow the administrator adequate time to place and provision the new certificates in advance of the 6:00:00 AM effective time.</span></span>  <br/> |
|<span data-ttu-id="38a0d-172">2</span><span class="sxs-lookup"><span data-stu-id="38a0d-172">2</span></span>  <br/> |<span data-ttu-id="38a0d-173">7/22/2015 2:00:00 AM-7/22/2015 5:59:59 AM</span><span class="sxs-lookup"><span data-stu-id="38a0d-173">7/22/2015 2:00:00 AM - 7/22/2015 5:59:59 AM</span></span>  <br/> <span data-ttu-id="38a0d-174">유효 시간이 6:00:00 AM 인 Edge 서버의 인증서 설정 (4 시간 리드 타임은이 예제의 경우 \<) CsCertificate 인증서 사용 형식\> -지문 \<지문 (새 인증서의 유효 시간\> -롤-EffectiveDate \<datetime 문자열 사용)\></span><span class="sxs-lookup"><span data-stu-id="38a0d-174">Set Certificates on Edge Servers with effective time of 6:00:00 AM (4 hour lead time is for this example, but can be longer) using Set-CsCertificate -Type \<certificate usage type\> -Thumbprint \<thumbprint of new certificate\> -Roll -EffectiveDate \<datetime string of the effective time for new certificate\></span></span>  <br/> |
|<span data-ttu-id="38a0d-175">3</span><span class="sxs-lookup"><span data-stu-id="38a0d-175">3</span></span>  <br/> |<span data-ttu-id="38a0d-176">7/22/2015 6:00 AM-7/22/2015 2:00 PM</span><span class="sxs-lookup"><span data-stu-id="38a0d-176">7/22/2015 6:00 AM - 7/22/2015 2:00 PM</span></span>  <br/> <span data-ttu-id="38a0d-177">토큰의 유효성을 검사 하려면 새 인증서가 먼저 시도 되 고 새 인증서가 토큰의 유효성을 검사 하지 못하면 이전 인증서가 시도 됩니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-177">To validate tokens, the new certificate is tried first, and if the new certificate fails to validate the token, the old certificate is tried.</span></span> <span data-ttu-id="38a0d-178">이 프로세스는 8 시간 (기본 토큰 수명) 기간 동안 모든 토큰에 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-178">This process is used for all tokens during the 8 hour (default token lifetime) overlap period.</span></span>  <br/> |
|<span data-ttu-id="38a0d-179">4(tcp/ipv4)</span><span class="sxs-lookup"><span data-stu-id="38a0d-179">4</span></span>  <br/> |<span data-ttu-id="38a0d-180">종료: 7/22/2015 2:00:01 PM</span><span class="sxs-lookup"><span data-stu-id="38a0d-180">End: 7/22/2015 2:00:01 PM</span></span>  <br/> <span data-ttu-id="38a0d-181">오래 된 인증서가 만료 되 고 새 인증서가 걸렸습니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-181">Old certificate has expired and the new certificate has taken over.</span></span> <span data-ttu-id="38a0d-182">CsCertificate \<인증서 용도 유형을\> 제거 하 여 이전 인증서를 안전 하 게 제거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-182">Old certificate can be safely removed with Remove-CsCertificate -Type \<certificate usage type\> -Previous</span></span>  <br/> |
   
<span data-ttu-id="38a0d-183">유효 시간 (7/22/2015 6:00:00 AM)에 도달 하면 새 인증서가 모든 새 토큰을 발급 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-183">When the effective time is reached (7/22/2015 6:00:00 AM), all new tokens are issued by the new certificate.</span></span> <span data-ttu-id="38a0d-184">토큰의 유효성을 검사할 때 새 인증서에 대해 토큰의 유효성이 먼저 검사 됩니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-184">When validating tokens, tokens will first be validated against the new certificate.</span></span> <span data-ttu-id="38a0d-185">유효성 검사에 실패 하면 이전 인증서가 시도 됩니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-185">If the validation fails, the old certificate is tried.</span></span> <span data-ttu-id="38a0d-186">이전 인증서로 새 응답을 시도 하는 프로세스는 이전 인증서의 만료 시간까지 계속 됩니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-186">The process of trying the new and falling back to the old certificate will continue until the expiry time of the old certificate.</span></span> <span data-ttu-id="38a0d-187">이전 인증서가 만료 된 경우 (7/22/2015 2:00:00 PM), 새 인증서로만 토큰의 유효성을 검사할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-187">Once the old certificate has expired (7/22/2015 2:00:00 PM), tokens will only be validated by the new certificate.</span></span> <span data-ttu-id="38a0d-188">이전 인증서는-Previous 매개 변수와 함께 CsCertificate cmdlet을 사용 하 여 안전 하 게 제거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-188">The old certificate can be safely removed using the Remove-CsCertificate cmdlet with the -Previous parameter.</span></span>

```PowerShell
Remove-CsCertificate -Type AudioVideoAuthentication -Previous
```

### <a name="to-update-or-renew-an-oauthtokenissuer-certificate-with-a--roll-and--effectivedate-parameters"></a><span data-ttu-id="38a0d-189">-롤 및-EffectiveDate 매개 변수를 사용 하 여 OAuthTokenIssuer 인증서를 업데이트 하거나 갱신 하려면</span><span class="sxs-lookup"><span data-stu-id="38a0d-189">To update or renew an OAuthTokenIssuer certificate with a -Roll and -EffectiveDate parameters</span></span>

1. <span data-ttu-id="38a0d-190">로컬 컴퓨터에 관리자 그룹의 구성원으로 로그온 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-190">Log on to the local computer as a member of the Administrators group.</span></span>
    
2. <span data-ttu-id="38a0d-191">프런트 엔드 서버의 기존 인증서에 대 한 내보낼 수 있는 개인 키를 사용 하 여 갱신 또는 새 OAuthTokenIssuer 인증서를 요청 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-191">Request a renewal or new OAuthTokenIssuer certificate with exportable private key for the existing certificate on the Front End Server.</span></span>
    
3. <span data-ttu-id="38a0d-192">풀의 프런트 엔드 서버로 새 OAuthTokenIssuer 인증서를 가져옵니다 (풀을 배포한 경우).</span><span class="sxs-lookup"><span data-stu-id="38a0d-192">Import the new OAuthTokenIssuer certificate to a Front End Server in your pool (if you have a pool deployed).</span></span> <span data-ttu-id="38a0d-193">OAuthTokenIssuer 인증서는 전역적으로 복제 되며 배포의 모든 서버에서 업데이트 되 고 갱신 하기만 하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-193">The OAuthTokenIssuer certificate is replicated globally and only needs to be updated and renewed at any server in your deployment.</span></span> <span data-ttu-id="38a0d-194">프런트 엔드 서버는 예제로 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-194">The Front End Server is used as an example.</span></span>
    
4. <span data-ttu-id="38a0d-195">Set-CsCertificate cmdlet을 사용 하 여 가져온 인증서를 구성 하 고-Roll 매개 변수를-EffectiveDate 매개 변수와 함께 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-195">Configure the imported certificate with the Set-CsCertificate cmdlet and use the -Roll parameter with the -EffectiveDate parameter.</span></span> <span data-ttu-id="38a0d-196">유효 날짜는 최소 24 시간을 뺀 현재 인증서 만료 시간 (14:00:00 또는 2:00:00 PM)으로 정의 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-196">The effective date should be defined as the current certificate expire time (14:00:00, or 2:00:00 PM) minus a minimum of 24 hours.</span></span> 
    
    <span data-ttu-id="38a0d-197">CsCertificate 명령은-롤 및-EffectiveTime 매개 변수를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-197">The Set-CsCertificate command with the -Roll and -EffectiveTime parameter:</span></span>
    
   ```PowerShell
   Set-CsCertificate -Type OAuthTokenIssuer -Thumbprint <thumb
          print of new certificate> -Roll -EffectiveDate <date and time for
          certificate to become active> -identity Global 
   ```

<span data-ttu-id="38a0d-198">CsCertificate 명령 예:</span><span class="sxs-lookup"><span data-stu-id="38a0d-198">An example Set-CsCertificate command:</span></span>
    
  ```PowerShell
  Set-CsCertificate -Type OAuthTokenIssuer -Thumbprint
          "B142918E463981A76503828BB1278391B716280987B" -Roll -EffectiveDate "7/21/2015
          1:00:00 PM" 
  ```

> [!IMPORTANT]
> <span data-ttu-id="38a0d-199">EffectiveDate는 서버의 국가 및 언어 설정에 맞게 형식이 지정 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-199">The EffectiveDate must be formatted to match your server's region and language settings.</span></span> <span data-ttu-id="38a0d-200">이 예제에서는 미국 영어 국가 및 언어 설정을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-200">The example uses the US English Region and Language settings</span></span> 
  
<span data-ttu-id="38a0d-201">유효 시간 (7/21/2015 1:00:00 AM)에 도달 하면 새 인증서가 모든 새 토큰을 발급 합니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-201">When the effective time is reached (7/21/2015 1:00:00 AM), all new tokens are issued by the new certificate.</span></span> <span data-ttu-id="38a0d-202">토큰의 유효성을 검사할 때 새 인증서에 대해 토큰의 유효성이 먼저 검사 됩니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-202">When validating tokens, tokens will first be validated against the new certificate.</span></span> <span data-ttu-id="38a0d-203">유효성 검사에 실패 하면 이전 인증서가 시도 됩니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-203">If the validation fails, the old certificate is tried.</span></span> <span data-ttu-id="38a0d-204">이전 인증서로 새 응답을 시도 하는 프로세스는 이전 인증서의 만료 시간까지 계속 됩니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-204">The process of trying the new and falling back to the old certificate will continue until the expiry time of the old certificate.</span></span> <span data-ttu-id="38a0d-205">이전 인증서가 만료 된 경우 (7/22/2015 2:00:00 PM), 새 인증서로만 토큰의 유효성을 검사할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-205">Once the old certificate has expired (7/22/2015 2:00:00 PM), tokens will only be validated by the new certificate.</span></span> <span data-ttu-id="38a0d-206">이전 인증서는-Previous 매개 변수와 함께 CsCertificate cmdlet을 사용 하 여 안전 하 게 제거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="38a0d-206">The old certificate can be safely removed using the Remove-CsCertificate cmdlet with the -Previous parameter.</span></span>
```PowerShell
Remove-CsCertificate -Type OAuthTokenIssuer -Previous 
```

## <a name="see-also"></a><span data-ttu-id="38a0d-207">참고 항목</span><span class="sxs-lookup"><span data-stu-id="38a0d-207">See also</span></span>

[<span data-ttu-id="38a0d-208">비즈니스용 Skype 서버에서 OAuth (서버 간 인증) 및 파트너 응용 프로그램 관리</span><span class="sxs-lookup"><span data-stu-id="38a0d-208">Manage server-to-server authentication (OAuth) and partner applications in Skype for Business Server</span></span>](server-to-server-and-partner-applications.md)

[<span data-ttu-id="38a0d-209">Set-CsCertificate</span><span class="sxs-lookup"><span data-stu-id="38a0d-209">Set-CsCertificate</span></span>](https://docs.microsoft.com/powershell/module/skype/set-cscertificate?view=skype-ps)
  
[<span data-ttu-id="38a0d-210">제거-CsCertificate</span><span class="sxs-lookup"><span data-stu-id="38a0d-210">Remove-CsCertificate</span></span>](https://docs.microsoft.com/powershell/module/skype/remove-cscertificate?view=skype-ps)
