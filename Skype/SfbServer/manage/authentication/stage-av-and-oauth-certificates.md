---
title: 비즈니스용 Skype 서버에서 -Roll을 사용하여 비즈니스용 Skype 서버에서 AV 및 OAuth Set-CsCertificate
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 22dec3cc-4b6b-4df2-b269-5b35df4731a7
description: '요약: 비즈니스용 Skype 서버에 대해 AV 및 OAuth 인증서를 준비합니다.'
ms.openlocfilehash: a2586e9ebda1bae1605fd6033681b469e6731b8c
ms.sourcegitcommit: c528fad9db719f3fa96dc3fa99332a349cd9d317
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 01/12/2021
ms.locfileid: "49806558"
---
# <a name="stage-av-and-oauth-certificates-in-skype-for-business-server-using--roll-in-set-cscertificate"></a><span data-ttu-id="bf9ac-103">비즈니스용 Skype 서버에서 -Roll을 사용하여 비즈니스용 Skype 서버에서 AV 및 OAuth Set-CsCertificate</span><span class="sxs-lookup"><span data-stu-id="bf9ac-103">Stage AV and OAuth certificates in Skype for Business Server using -Roll in Set-CsCertificate</span></span>
 
<span data-ttu-id="bf9ac-104">**요약:** 비즈니스용 Skype 서버에 대한 AV 및 OAuth 인증서를 준비합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-104">**Summary:** Stage AV and OAuth certificates for Skype for Business Server.</span></span>
  
<span data-ttu-id="bf9ac-105">A/V(오디오/비디오) 통신은 비즈니스용 Skype 서버의 핵심 구성 요소입니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-105">Audio/Video (A/V) communications is a key component of Skype for Business Server.</span></span> <span data-ttu-id="bf9ac-106">응용 프로그램 공유 및 오디오 및 비디오 회의와 같은 기능은 A/V 에지 서비스, 특히 A/V 인증 서비스에 할당된 인증서를 사용하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-106">Features such as application sharing and audio and video conferencing rely on the certificates assigned to the A/V Edge service, specifically the A/V Authentication service.</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="bf9ac-107">이 새로운 기능은 A/V 에지 서비스 및 OAuthTokenIssuer 인증서에 대해 작동하도록 디자인됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-107">This new feature is designed to work for the A/V Edge service and the OAuthTokenIssuer certificate.</span></span> <span data-ttu-id="bf9ac-108">다른 인증서 유형은 A/V 에지 서비스 및 OAuth 인증서 유형과 함께 프로비전할 수 있지만 A/V 에지 서비스 인증서가 제공하는 동시 사용 동작을 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-108">Other certificate types can be provisioned along with the A/V Edge service and OAuth certificate type, but will not benefit from the coexistence behavior that the A/V Edge service certificate will.</span></span>
  
<span data-ttu-id="bf9ac-109">비즈니스용 Skype 서버 관리 셸 인증서를 관리하는 데 사용되는 비즈니스용 Skype 서버 관리 셸 cmdlet은 A/V 에지 서비스 인증서를 AudioVideoAuthentication 인증서 유형으로, OAuthServer 인증서를 typeOAuthTokenIssuer로 지어 습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-109">The Skype for Business Server Management Shell PowerShell cmdlets used to manage Skype for Business Server certificates refers to the A/V Edge service certificate as the AudioVideoAuthentication certificate type and the OAuthServer certificate as typeOAuthTokenIssuer.</span></span> <span data-ttu-id="bf9ac-110">이 항목의 나머지와 인증서를 고유하게 식별하기 위해 동일한 식별자 유형인 AudioVideoAuthentication 및OAuthTokenIssuer를 통해 참조됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-110">For the rest of this topic and to uniquely identify the certificates, they will be referred to by the same identifier type, AudioVideoAuthentication andOAuthTokenIssuer.</span></span>
  
<span data-ttu-id="bf9ac-111">A/V 인증 서비스는 클라이언트 및 기타 A/V 소비자가 사용하는 토큰을 발행합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-111">The A/V Authentication service is responsible for issuing tokens that are used by clients and other A/V consumers.</span></span> <span data-ttu-id="bf9ac-112">토큰은 인증서의 특성에서 생성되고 인증서가 만료되면 연결이 끊어지며 새 인증서에서 생성된 새 토큰에 다시 연결해야 하는 요구 사항이 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-112">The tokens are generated from attributes on the certificate, and when the certificate expires, loss of connection and requirement to rejoin with a new token generated by the new certificate will result.</span></span> <span data-ttu-id="bf9ac-113">비즈니스용 Skype 서버의 새로운 기능은 이 문제를 해결합니다. 즉, 이전 인증서가 만료되고 두 인증서가 한 기간 동안 계속 작동할 수 있도록 하기 위해 새 인증서를 준비할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-113">A new feature in Skype for Business Server will alleviate this problem - the ability to stage a new certificate in advance of the old one expiring and allowing both certificates to continue to function for a period of time.</span></span> <span data-ttu-id="bf9ac-114">이 기능은 비즈니스용 Skype 서버 관리 셸 Set-CsCertificate 업데이트된 기능을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-114">This feature uses updated functionality in the Set-CsCertificate Skype for Business Server Management Shell cmdlet.</span></span> <span data-ttu-id="bf9ac-115">기존 매개 변수인 -EffectiveDate를 사용하는 새 매개 변수 -Roll은 인증서 저장소에 새 AudioVideoAuthentication 인증서를 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-115">The new parameter -Roll, with the existing parameter -EffectiveDate, will place the new AudioVideoAuthentication certificate in the certificate store.</span></span> <span data-ttu-id="bf9ac-116">이전 AudioVideoAuthentication 인증서는 발급된 토큰에 대해 유효성을 검사할 수 있는 상태로 유지됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-116">The older AudioVideoAuthentication certificate will still remain for issued tokens to be validated against.</span></span> <span data-ttu-id="bf9ac-117">새 AudioVideoAuthentication 인증서를 추가하는 것부터 다음과 같은 일련의 이벤트가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-117">Beginning with putting the new AudioVideoAuthentication certificate in place, the following series of events will occur:</span></span>
  
> [!TIP]
> <span data-ttu-id="bf9ac-118">비즈니스용 Skype 서버 관리 셸 cmdlet을 사용하여 인증서를 관리하면 에지 서버에서 각 용도에 대해 별도의 인증서를 요청할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-118">Using the Skype for Business Server Management Shell cmdlets for managing certificates, you can request separate and distinct certificates for each purpose on the Edge Server.</span></span> <span data-ttu-id="bf9ac-119">비즈니스용 Skype 서버 배포 마법사에서 인증서 마법사를 사용하면 인증서를 만들  수 있지만, 일반적으로 모든 인증서가 단일 인증서에 에지 서버에 대해 사용하는 기본 형식을 결합합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-119">Using the Certificate Wizard in the Skype for Business Server Deployment Wizard assists you in creating certificates, but is typically of the **default** type which couples all certificate uses for the Edge Server onto a single certificate.</span></span> <span data-ttu-id="bf9ac-120">롤링 인증서 기능을 사용하게 될 경우 다른 인증서에서 AudioVideoAuthentication 인증서를 분리하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-120">The recommended practice if you are going to use the rolling certificate feature is to decouple the AudioVideoAuthentication certificate from the other certificate purposes.</span></span> <span data-ttu-id="bf9ac-121">기본 유형의 인증서를 프로비전하고 준비할 수 있지만 결합된 인증서의 AudioVideoAuthentication 부분만 준비를 통해 혜택을 받을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-121">You can provision and stage a certificate of the Default type, but only the AudioVideoAuthentication portion of the combined certificate will benefit from the staging.</span></span> <span data-ttu-id="bf9ac-122">인증서가 만료될 때 인스턴트 메시징 대화에 참여한 사용자는 액세스 에지 서비스에 연결된 새 인증서를 사용하려면 로그아웃했다가 다시 로그인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-122">A user involved in (for example) an instant messaging conversation when the certificate expires will need to log out and log back in to make use of the new certificate associated with the Access Edge service.</span></span> <span data-ttu-id="bf9ac-123">웹 회의 에지 서비스를 사용하여 웹 회의에 참여한 사용자에 대해 유사한 동작이 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-123">Similar behavior will occur for a user involved in a Web conference using the Web Conferencing Edge service.</span></span> <span data-ttu-id="bf9ac-124">OAuthTokenIssuer 인증서는 모든 서버에서 공유되는 특정 유형입니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-124">The OAuthTokenIssuer certificate is a specific type that is shared across all servers.</span></span> <span data-ttu-id="bf9ac-125">인증서를 한 장소에서 만들고 관리하면 인증서가 다른 모든 서버의 중앙 관리 저장소에 저장됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-125">You create and manage the certificate in one place and the certificate is stored in the Central Management store for all other servers.</span></span>
  
<span data-ttu-id="bf9ac-126">현재 인증서 만료 전에 Set-CsCertificate cmdlet을 사용하고 인증서를 단계화할 때 옵션 및 요구 사항을 완전히 이해하려면 추가 정보가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-126">Additional detail is needed to fully understand your options and requirements when using the Set-CsCertificate cmdlet and using it to stage certificates prior to the current certificate expiring.</span></span> <span data-ttu-id="bf9ac-127">-Roll 매개 변수는 중요하지만 기본적으로 단일 용도입니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-127">The -Roll parameter is important, but essentially single purpose.</span></span> <span data-ttu-id="bf9ac-128">매개 변수로 정의하는 경우 Set-CsCertificate -Type(예: AudioVideoAuthentication 및 OAuthTokenIssuer)에 의해 정의되는 인증서에 대한 정보를 제공하게 될 것임이 -EffectiveDate에 의해 정의될 때 해당 인증서에 대한 정보를 제공하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-128">If you define it as a parameter, you are telling Set-CsCertificate that you will be providing information about the certificate that will be affected defined by -Type (for example AudioVideoAuthentication and OAuthTokenIssuer), when the certificate will become effective defined by -EffectiveDate.</span></span>
  
 <span data-ttu-id="bf9ac-129">**-Roll**: -Roll 매개 변수가 필요하며 이 매개 변수와 함께 제공해야 하는 종속성도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-129">**-Roll**: The -Roll parameter is required and has dependencies that must be supplied along with it.</span></span> <span data-ttu-id="bf9ac-130">영향을 받을 인증서와 인증서 적용 방법을 완전히 정의하는 데 필요한 매개 변수:</span><span class="sxs-lookup"><span data-stu-id="bf9ac-130">Required parameters to fully define which certificates will be affected and how they will be applied:</span></span>
  
 <span data-ttu-id="bf9ac-131">**-EffectiveDate**: -EffectiveDate 매개 변수는 새 인증서가 현재 인증서와 함께 활성화될 때를 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-131">**-EffectiveDate**: The parameter -EffectiveDate defines when the new certificate will become co-active with the current certificate.</span></span> <span data-ttu-id="bf9ac-132">-EffectiveDate는 현재 인증서의 만료 기간에 가까워지거나 더 긴 기간일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-132">The -EffectiveDate can be close to the expiry time of the current certificate, or it can be a longer period of time.</span></span> <span data-ttu-id="bf9ac-133">AudioVideoAuthentication 인증서에 권장되는 최소 -EffectiveDate는 8시간으로, AudioVideoAuthentication 인증서를 사용하여 발급된 AV 에지 서비스 토큰의 기본 토큰 수명입니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-133">A recommended minimum -EffectiveDate for the AudioVideoAuthentication certificate would be 8 hours, which is the default token lifetime for AV Edge service tokens issued using the AudioVideoAuthentication certificate.</span></span>
  
<span data-ttu-id="bf9ac-134">OAuthTokenIssuer 인증서를 준비할 때 인증서가 유효해지기 전에는 에드 타임에 대한 요구 사항이 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-134">When staging OAuthTokenIssuer certificates, there are different requirements for the lead time before the certificate can become effective.</span></span> <span data-ttu-id="bf9ac-135">OAuthTokenIssuer 인증서의 최소 기간은 현재 인증서의 만료 시간 24시간 전입니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-135">The minimum time that the OAuthTokenIssuer certificate should have for its lead time is 24 hours before the expiration time of the current certificate.</span></span> <span data-ttu-id="bf9ac-136">공존에 대한 연장된 리드 타임은 인증서 생성 인증 및 암호화 키 자료에 대한 보존 시간이 더 긴 OAuthTokenIssuer 인증서(예: Exchange Server)에 종속된 다른 서버 역할 때문에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-136">The extended lead time for the coexistence is because of other server roles that are dependent on the OAuthTokenIssuer certificate (Exchange Server, for example) which has a longer retention time for certificate created authentication and encryption key materials.</span></span>
  
 <span data-ttu-id="bf9ac-137">**-Thumbprint**: 지문은 인증서에서 해당 인증서에 고유한 특성입니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-137">**-Thumbprint**: The thumbprint is an attribute on the certificate that is unique to that certificate.</span></span> <span data-ttu-id="bf9ac-138">-Thumbprint 매개 변수는 cmdlet의 작업으로 영향을 받을 인증서를 식별하는 데 Set-CsCertificate 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-138">The -Thumbprint parameter is used to identify the certificate that will be affected by the actions of the Set-CsCertificate cmdlet.</span></span>
  
 <span data-ttu-id="bf9ac-139">**-Type**: -Type 매개 변수는 단일 인증서 사용 유형 또는 인증서 사용 유형에 대한 콤보로 구분된 목록을 허용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-139">**-Type**: The -Type parameter can accept a single certificate usage type or a comma separated list of certificate usage types.</span></span> <span data-ttu-id="bf9ac-140">인증서 유형은 cmdlet 및 인증서의 용도를 서버로 식별하는 유형입니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-140">The certificate types are those that identify to the cmdlet and to the server what the purpose of the certificate is.</span></span> <span data-ttu-id="bf9ac-141">예를 들어 AudioVideoAuthentication을 입력하면 A/V 에지 서비스 및 AV 인증 서비스에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-141">For example, type AudioVideoAuthentication is for use by the A/V Edge service and the AV Authentication service.</span></span> <span data-ttu-id="bf9ac-142">서로 다른 유형의 인증서를 동시에 준비하고 프로비전하기로 결정한 경우 인증서에 대해 가장 긴 최소 유효 리드 타임을 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-142">If you decide to stage and provision certificates of a different type at the same time, you must consider the longest required minimum effective lead time for the certificates.</span></span> <span data-ttu-id="bf9ac-143">예를 들어 AudioVideoAuthentication 및 OAuthTokenIssuer 유형의 인증서를 준비해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-143">For example, you need to stage certificates of type AudioVideoAuthentication and OAuthTokenIssuer.</span></span> <span data-ttu-id="bf9ac-144">최소 -EffectiveDate는 최소 24시간의 리드 타임을 가지는 OAuthTokenIssuer와 같은 두 인증서보다 커야 합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-144">Your minimum -EffectiveDate must be the greater of the two certificates, in this case the OAuthTokenIssuer, which has a minimum lead time of 24 hours.</span></span> <span data-ttu-id="bf9ac-145">24시간의 리드 타임으로 AudioVideoAuthentication 인증서를 단계별로 설정하지 않을 경우 요구 사항에 더 많은 EffectiveDate를 사용 하여 별도로 스테이지를 세우는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-145">If you do not want to stage the AudioVideoAuthentication certificate with a lead time of 24 hours, stage it separately with an EffectiveDate that is more to your requirements.</span></span>
  
### <a name="to-update-or-renew-an-av-edge-service-certificate-with-a--roll-and--effectivedate-parameters"></a><span data-ttu-id="bf9ac-146">-Roll 및 -EffectiveDate 매개 변수를 사용하여 A/V 에지 서비스 인증서를 업데이트하거나 갱신</span><span class="sxs-lookup"><span data-stu-id="bf9ac-146">To update or renew an A/V Edge service certificate with a -Roll and -EffectiveDate parameters</span></span>

1. <span data-ttu-id="bf9ac-147">Administrators 그룹의 구성원으로 로컬 컴퓨터에 로그온합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-147">Log on to the local computer as a member of the Administrators group.</span></span>
    
2. <span data-ttu-id="bf9ac-148">A/V 에지 서비스의 기존 인증서에 대해 내보낼 수 있는 개인 키가 있는 갱신 또는 새 AudioVideoAuthentication 인증서를 요청합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-148">Request a renewal or new AudioVideoAuthentication certificate with exportable private key for the existing certificate on the A/V Edge service.</span></span>
    
3. <span data-ttu-id="bf9ac-149">풀이 배포된 경우 새 AudioVideoAuthentication 인증서를 에지 서버 및 풀의 다른 모든 에지 서버로 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-149">Import the new AudioVideoAuthentication certificate to the Edge Server and all other Edge Server in your pool (if you have a pool deployed).</span></span>
    
4. <span data-ttu-id="bf9ac-150">가져온 인증서를 Set-CsCertificate -EffectiveDate 매개 변수와 함께 -Roll 매개 변수를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-150">Configure the imported certificate with the Set-CsCertificate cmdlet and use the -Roll parameter with the -EffectiveDate parameter.</span></span> <span data-ttu-id="bf9ac-151">유효 날짜는 현재 인증서 만료 시간(14:00:00 또는 오후 2:00:00)에서 토큰 수명(기본적으로 8시간)을 음으로 정의해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-151">The effective date should be defined as the current certificate expire time (14:00:00, or 2:00:00 PM) minus token lifetime (by default eight hours).</span></span> <span data-ttu-id="bf9ac-152">이 경우 인증서를 활성으로 설정해야 하는 시간이 제공될 수 있으며 -EffectiveDate \<string\> : "7/22/2015 6:00:00 AM"입니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-152">This gives us a time that the certificate must be set to active, and is the -EffectiveDate \<string\>: "7/22/2015 6:00:00 AM".</span></span> 
    
    > [!IMPORTANT]
    > <span data-ttu-id="bf9ac-153">에지 풀의 경우 모든 클라이언트 및 소비자 토큰이 새 인증서를 사용하여 갱신되기 전에 오래된 인증서 만료로 인한 A/V 통신 중단을 방지하기 위해 배포된 첫 번째 인증서의 -EffectiveDate 매개 변수에 정의된 날짜 및 시간으로 모든 AudioVideoAuthentication 인증서를 배포하고 프로비전해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-153">For an Edge pool, you must have all AudioVideoAuthentication certificates deployed and provisioned by the date and time defined by the -EffectiveDate parameter of the first certificate deployed to avoid possible A/V communications disruption due to the older certificate expiring before all client and consumer tokens have been renewed using the new certificate.</span></span> 
  
    <span data-ttu-id="bf9ac-154">다음 Set-CsCertificate -Roll 및 -EffectiveTime 매개 변수를 사용하여 다음 명령을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-154">The Set-CsCertificate command with the -Roll and -EffectiveTime parameter:</span></span>
    
   ```PowerShell
   Set-CsCertificate -Type AudioVideoAuthentication -Thumbprint
          <thumb print of new certificate> -Roll -EffectiveDate <date and time
          for certificate to become active>
   ```

    <span data-ttu-id="bf9ac-155">명령에 Set-CsCertificate 예:</span><span class="sxs-lookup"><span data-stu-id="bf9ac-155">An example Set-CsCertificate command:</span></span>
    
   ```PowerShell
   Set-CsCertificate -Type AudioVideoAuthentication -Thumbprint
          "B142918E463981A76503828BB1278391B716280987B" -Roll -EffectiveDate "7/22/2015
          6:00:00 AM"
   ```

    > [!IMPORTANT]
    > <span data-ttu-id="bf9ac-156">EffectiveDate는 서버의 지역 및 언어 설정과 일치하게 형식을 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-156">The EffectiveDate must be formatted to match your server's region and language settings.</span></span> <span data-ttu-id="bf9ac-157">이 예제에서는 영어(미국) 지역 및 언어 설정을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-157">The example uses the US English Region and Language settings</span></span> 
  
<span data-ttu-id="bf9ac-158">Set-CsCertificate, -Roll 및 -EffectiveDate가 새 AudioVideoAuthentication 토큰을 발급하기 위해 새 인증서를 준비하는 데 사용하는 프로세스를 더 잘 이해하기 위해 기존 인증서를 사용하여 소비자가 사용 중인 AudioVideoAuthentication의 유효성을 검사할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-158">To further understand the process that Set-CsCertificate, -Roll, and -EffectiveDate use to stage a new certificate for issuing new AudioVideoAuthentication tokens while still using an existing certificate to validate AudioVideoAuthentication that are in use by consumers, a visual timeline is an effective means of understanding the process.</span></span> <span data-ttu-id="bf9ac-159">다음 예제에서 관리자는 A/V 에지 서비스 인증서가 2015년 7월 22일 오후 2시에 만료될 예정이라 판단합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-159">In the following example, the administrator determines that the A/V Edge service certificate is due to expire at 2:00:00 PM on 07/22/2015.</span></span> <span data-ttu-id="bf9ac-160">새 인증서를 요청하여 받은 후 풀의 각 에지 서버로 가져와야 합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-160">He requests and receives a new certificate and imports it to each Edge Server in his pool.</span></span> <span data-ttu-id="bf9ac-161">2015년 7월 22일 오전 2시에 -Roll, -Thumbprint는 새 인증서의 지문 문자열과 같고 -EffectiveTime은 201 Get-CsCertificate 5년 7월 22일 오전 6:00:00으로 설정되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-161">At 2 AM on 07/22/2015, he begins running Get-CsCertificate with -Roll, -Thumbprint equal to the thumbprint string of the new certificate, and -EffectiveTime set to 07/22/2015 6:00:00 AM.</span></span> <span data-ttu-id="bf9ac-162">이 명령은 각 에지 서버에서 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-162">He runs this command on each Edge Server.</span></span>
  
![Roll 및 EffectiveDate 매개 변수 사용](../../media/Ops_Certificate_Set_Roll_EffectiveTime_Timeline.jpg)
  
|<span data-ttu-id="bf9ac-164">**Callout**</span><span class="sxs-lookup"><span data-stu-id="bf9ac-164">**Callout**</span></span>|<span data-ttu-id="bf9ac-165">**단계**</span><span class="sxs-lookup"><span data-stu-id="bf9ac-165">**Stage**</span></span>|
|:-----|:-----|
|<span data-ttu-id="bf9ac-166">1 </span><span class="sxs-lookup"><span data-stu-id="bf9ac-166">1</span></span>  <br/> |<span data-ttu-id="bf9ac-167">시작: 2015/7/22 오전 12:00:00</span><span class="sxs-lookup"><span data-stu-id="bf9ac-167">Start: 7/22/2015 12:00:00 AM</span></span>  <br/> <span data-ttu-id="bf9ac-168">현재 AudioVideoAuthentication 인증서는 2015년 7월 22일 오후 2시에 만료될 예정입니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-168">The current AudioVideoAuthentication certificate is due to expire at 2:00:00 PM on 7/22/2015.</span></span> <span data-ttu-id="bf9ac-169">이는 인증서의 만료된 타임스탬프에 의해 결정됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-169">This is determined by the expires time stamp on the certificate.</span></span> <span data-ttu-id="bf9ac-170">기존 인증서가 만료 시간에 도달하기 전에 8시간의 겹치는 시간(기본 토큰 수명)을 고려하여 인증서 교체 및 롤오버를 계획합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-170">Plan your certificate replacement and rollover to account for an 8 hour overlap (default token lifetime) before the existing certificate reaches the expire time.</span></span> <span data-ttu-id="bf9ac-171">이 예에서는 오전 2:00:00의 리드 타임이 사용 6:00:00 AM 유효 시간 전까지 관리자가 새 인증서를 적절한 시간으로 설정하고 프로비전할 수 있도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-171">The 2:00:00 AM lead time is used in this example to allow the administrator adequate time to place and provision the new certificates in advance of the 6:00:00 AM effective time.</span></span>  <br/> |
|<span data-ttu-id="bf9ac-172">2 </span><span class="sxs-lookup"><span data-stu-id="bf9ac-172">2</span></span>  <br/> |<span data-ttu-id="bf9ac-173">2015/7/22 오전 2:00:00 - 2015/7/22 5:59:59</span><span class="sxs-lookup"><span data-stu-id="bf9ac-173">7/22/2015 2:00:00 AM - 7/22/2015 5:59:59 AM</span></span>  <br/> <span data-ttu-id="bf9ac-174">Set-CsCertificate -Type \<certificate usage type\> -Thumbprint -Roll -EffectiveDate를 사용하여 에지 서버의 인증서를 유효 시간 6:00:00(이 예에서는 4시간이 되지만 더 길어도 되지만 더 길어도 되지만) \<thumbprint of new certificate\>\<datetime string of the effective time for new certificate\></span><span class="sxs-lookup"><span data-stu-id="bf9ac-174">Set Certificates on Edge Servers with effective time of 6:00:00 AM (4 hour lead time is for this example, but can be longer) using Set-CsCertificate -Type \<certificate usage type\> -Thumbprint \<thumbprint of new certificate\> -Roll -EffectiveDate \<datetime string of the effective time for new certificate\></span></span>  <br/> |
|<span data-ttu-id="bf9ac-175">3 </span><span class="sxs-lookup"><span data-stu-id="bf9ac-175">3</span></span>  <br/> |<span data-ttu-id="bf9ac-176">2015/7/22 오전 6:00 - 2015/7/22 오후 2:00</span><span class="sxs-lookup"><span data-stu-id="bf9ac-176">7/22/2015 6:00 AM - 7/22/2015 2:00 PM</span></span>  <br/> <span data-ttu-id="bf9ac-177">토큰의 유효성을 검사하기 위해 새 인증서를 먼저 시도하고 새 인증서가 토큰의 유효성을 검사하지 못하면 이전 인증서가 시도됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-177">To validate tokens, the new certificate is tried first, and if the new certificate fails to validate the token, the old certificate is tried.</span></span> <span data-ttu-id="bf9ac-178">이 프로세스는 8시간(기본 토큰 수명) 겹치는 기간 동안 모든 토큰에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-178">This process is used for all tokens during the 8 hour (default token lifetime) overlap period.</span></span>  <br/> |
|<span data-ttu-id="bf9ac-179">4 </span><span class="sxs-lookup"><span data-stu-id="bf9ac-179">4</span></span>  <br/> |<span data-ttu-id="bf9ac-180">종료: 2015/7/22 오후 2:00:01</span><span class="sxs-lookup"><span data-stu-id="bf9ac-180">End: 7/22/2015 2:00:01 PM</span></span>  <br/> <span data-ttu-id="bf9ac-181">이전 인증서가 만료되고 새 인증서가 인계되었습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-181">Old certificate has expired and the new certificate has taken over.</span></span> <span data-ttu-id="bf9ac-182">-Type -Previous을 사용하여 Remove-CsCertificate \<certificate usage type\> 인증서를 안전하게 제거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-182">Old certificate can be safely removed with Remove-CsCertificate -Type \<certificate usage type\> -Previous</span></span>  <br/> |
   
<span data-ttu-id="bf9ac-183">유효 시간(2015/7/22/2015 오전 6:00:00)에 도달하면 모든 새 토큰이 새 인증서에 의해 발급됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-183">When the effective time is reached (7/22/2015 6:00:00 AM), all new tokens are issued by the new certificate.</span></span> <span data-ttu-id="bf9ac-184">토큰의 유효성을 검사할 때 먼저 새 인증서에 대해 토큰의 유효성을 검사합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-184">When validating tokens, tokens will first be validated against the new certificate.</span></span> <span data-ttu-id="bf9ac-185">유효성 검사가 실패하면 이전 인증서가 시도됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-185">If the validation fails, the old certificate is tried.</span></span> <span data-ttu-id="bf9ac-186">새 인증서를 시도하고 이전 인증서로 돌아가는 프로세스는 이전 인증서가 만료될 때까지 계속됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-186">The process of trying the new and falling back to the old certificate will continue until the expiry time of the old certificate.</span></span> <span data-ttu-id="bf9ac-187">이전 인증서가 만료되면(2015/7/22 오후 2:00:00) 새 인증서에 의해서만 토큰의 유효성이 검사됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-187">Once the old certificate has expired (7/22/2015 2:00:00 PM), tokens will only be validated by the new certificate.</span></span> <span data-ttu-id="bf9ac-188">-Previous 매개 변수와 함께 Remove-CsCertificate 사용하여 이전 인증서를 안전하게 제거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-188">The old certificate can be safely removed using the Remove-CsCertificate cmdlet with the -Previous parameter.</span></span>

```PowerShell
Remove-CsCertificate -Type AudioVideoAuthentication -Previous
```

### <a name="to-update-or-renew-an-oauthtokenissuer-certificate-with-a--roll-and--effectivedate-parameters"></a><span data-ttu-id="bf9ac-189">-Roll 및 -EffectiveDate 매개 변수를 사용하여 OAuthTokenIssuer 인증서를 업데이트하거나 갱신</span><span class="sxs-lookup"><span data-stu-id="bf9ac-189">To update or renew an OAuthTokenIssuer certificate with a -Roll and -EffectiveDate parameters</span></span>

1. <span data-ttu-id="bf9ac-190">Administrators 그룹의 구성원으로 로컬 컴퓨터에 로그온합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-190">Log on to the local computer as a member of the Administrators group.</span></span>
    
2. <span data-ttu-id="bf9ac-191">프런트 엔드 서버의 기존 인증서에 대해 내보낼 수 있는 개인 키가 있는 갱신 또는 새 OAuthTokenIssuer 인증서를 요청합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-191">Request a renewal or new OAuthTokenIssuer certificate with exportable private key for the existing certificate on the Front End Server.</span></span>
    
3. <span data-ttu-id="bf9ac-192">풀이 배포된 경우 새 OAuthTokenIssuer 인증서를 풀의 프런트 엔드 서버로 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-192">Import the new OAuthTokenIssuer certificate to a Front End Server in your pool (if you have a pool deployed).</span></span> <span data-ttu-id="bf9ac-193">OAuthTokenIssuer 인증서는 전역적으로 복제되고 배포의 모든 서버에서만 업데이트 및 갱신하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-193">The OAuthTokenIssuer certificate is replicated globally and only needs to be updated and renewed at any server in your deployment.</span></span> <span data-ttu-id="bf9ac-194">프런트 엔드 서버가 예로 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-194">The Front End Server is used as an example.</span></span>
    
4. <span data-ttu-id="bf9ac-195">가져온 인증서를 Set-CsCertificate -EffectiveDate 매개 변수와 함께 -Roll 매개 변수를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-195">Configure the imported certificate with the Set-CsCertificate cmdlet and use the -Roll parameter with the -EffectiveDate parameter.</span></span> <span data-ttu-id="bf9ac-196">유효 날짜는 현재 인증서 만료 시간(14:00:00 또는 오후 2:00:00)에서 최소 24시간을 음으로 정의해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-196">The effective date should be defined as the current certificate expire time (14:00:00, or 2:00:00 PM) minus a minimum of 24 hours.</span></span> 
    
    <span data-ttu-id="bf9ac-197">다음 Set-CsCertificate -Roll 및 -EffectiveTime 매개 변수를 사용하여 다음 명령을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-197">The Set-CsCertificate command with the -Roll and -EffectiveTime parameter:</span></span>
    
   ```PowerShell
   Set-CsCertificate -Type OAuthTokenIssuer -Thumbprint <thumb
          print of new certificate> -Roll -EffectiveDate <date and time for
          certificate to become active> -identity Global 
   ```

<span data-ttu-id="bf9ac-198">명령에 Set-CsCertificate 예:</span><span class="sxs-lookup"><span data-stu-id="bf9ac-198">An example Set-CsCertificate command:</span></span>
    
  ```PowerShell
  Set-CsCertificate -Type OAuthTokenIssuer -Thumbprint
          "B142918E463981A76503828BB1278391B716280987B" -Roll -EffectiveDate "7/21/2015
          1:00:00 PM" 
  ```

> [!IMPORTANT]
> <span data-ttu-id="bf9ac-199">EffectiveDate는 서버의 지역 및 언어 설정과 일치하게 형식을 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-199">The EffectiveDate must be formatted to match your server's region and language settings.</span></span> <span data-ttu-id="bf9ac-200">이 예제에서는 영어(미국) 지역 및 언어 설정을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-200">The example uses the US English Region and Language settings</span></span> 
  
<span data-ttu-id="bf9ac-201">유효 시간(2015/7/21 오전 1:00:00)에 도달하면 모든 새 토큰이 새 인증서에 의해 발급됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-201">When the effective time is reached (7/21/2015 1:00:00 AM), all new tokens are issued by the new certificate.</span></span> <span data-ttu-id="bf9ac-202">토큰의 유효성을 검사할 때 먼저 새 인증서에 대해 토큰의 유효성을 검사합니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-202">When validating tokens, tokens will first be validated against the new certificate.</span></span> <span data-ttu-id="bf9ac-203">유효성 검사가 실패하면 이전 인증서가 시도됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-203">If the validation fails, the old certificate is tried.</span></span> <span data-ttu-id="bf9ac-204">새 인증서를 시도하고 이전 인증서로 돌아가는 프로세스는 이전 인증서가 만료될 때까지 계속됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-204">The process of trying the new and falling back to the old certificate will continue until the expiry time of the old certificate.</span></span> <span data-ttu-id="bf9ac-205">이전 인증서가 만료되면(2015/7/22 오후 2:00:00) 새 인증서에 의해서만 토큰의 유효성이 검사됩니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-205">Once the old certificate has expired (7/22/2015 2:00:00 PM), tokens will only be validated by the new certificate.</span></span> <span data-ttu-id="bf9ac-206">-Previous 매개 변수와 함께 Remove-CsCertificate 사용하여 이전 인증서를 안전하게 제거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="bf9ac-206">The old certificate can be safely removed using the Remove-CsCertificate cmdlet with the -Previous parameter.</span></span>
```PowerShell
Remove-CsCertificate -Type OAuthTokenIssuer -Previous 
```

## <a name="see-also"></a><span data-ttu-id="bf9ac-207">참고 항목</span><span class="sxs-lookup"><span data-stu-id="bf9ac-207">See also</span></span>

[<span data-ttu-id="bf9ac-208">비즈니스용 Skype 서버에서 OAuth(서버 대 서버 인증) 및 파트너 응용 프로그램 관리</span><span class="sxs-lookup"><span data-stu-id="bf9ac-208">Manage server-to-server authentication (OAuth) and partner applications in Skype for Business Server</span></span>](server-to-server-and-partner-applications.md)

[<span data-ttu-id="bf9ac-209">Set-CsCertificate</span><span class="sxs-lookup"><span data-stu-id="bf9ac-209">Set-CsCertificate</span></span>](https://docs.microsoft.com/powershell/module/skype/set-cscertificate?view=skype-ps)
  
[<span data-ttu-id="bf9ac-210">Remove-CsCertificate</span><span class="sxs-lookup"><span data-stu-id="bf9ac-210">Remove-CsCertificate</span></span>](https://docs.microsoft.com/powershell/module/skype/remove-cscertificate?view=skype-ps)
